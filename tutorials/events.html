<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Events (alpha) - The Synthizer Manual</title>
        
        


        <!-- Custom HTML head -->
        


        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        
        <link rel="icon" href="../favicon.svg">
        
        
        <link rel="shortcut icon" href="../favicon.png">
        
        <link rel="stylesheet" href="../css/variables.css">
        <link rel="stylesheet" href="../css/general.css">
        <link rel="stylesheet" href="../css/chrome.css">
        
        <link rel="stylesheet" href="../css/print.css" media="print">
        

        <!-- Fonts -->
        <link rel="stylesheet" href="../FontAwesome/css/font-awesome.css">
        
        <link rel="stylesheet" href="../fonts/fonts.css">
        

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../highlight.css">
        <link rel="stylesheet" href="../tomorrow-night.css">
        <link rel="stylesheet" href="../ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        

        
    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded "><a href="../introduction.html"><strong aria-hidden="true">1.</strong> Introduction</a></li><li class="chapter-item expanded affix "><li class="part-title">Tutorials</li><li class="chapter-item expanded "><a href="../tutorials/python.html"><strong aria-hidden="true">2.</strong> A Basic Python Tutorial</a></li><li class="chapter-item expanded "><a href="../tutorials/events.html" class="active"><strong aria-hidden="true">3.</strong> Events (alpha)</a></li><li class="chapter-item expanded affix "><li class="part-title">Concepts</li><li class="chapter-item expanded "><a href="../concepts/introduction.html"><strong aria-hidden="true">4.</strong> Introduction</a></li><li class="chapter-item expanded "><a href="../concepts/stability.html"><strong aria-hidden="true">5.</strong> Stability Guarantees</a></li><li class="chapter-item expanded "><a href="../concepts/signal_graph.html"><strong aria-hidden="true">6.</strong> The Signal Graph, Library Parameters, and limitations</a></li><li class="chapter-item expanded "><a href="../concepts/conventions.html"><strong aria-hidden="true">7.</strong> C API Conventions</a></li><li class="chapter-item expanded "><a href="../concepts/initialization.html"><strong aria-hidden="true">8.</strong> Logging, Initialization, and Shutdown</a></li><li class="chapter-item expanded "><a href="../concepts/object_model.html"><strong aria-hidden="true">9.</strong> Objects, Handles, and Properties</a></li><li class="chapter-item expanded "><a href="../concepts/streams.html"><strong aria-hidden="true">10.</strong> Streams</a></li><li class="chapter-item expanded "><a href="../concepts/3d_panning.html"><strong aria-hidden="true">11.</strong> 3D Panning </a></li><li class="chapter-item expanded "><a href="../concepts/channel_mixing.html"><strong aria-hidden="true">12.</strong> Channel Upmixing and Downmixing </a></li><li class="chapter-item expanded "><a href="../concepts/effects.html"><strong aria-hidden="true">13.</strong> Effects and Effect Routing</a></li><li class="chapter-item expanded affix "><li class="part-title">The Object Reference</li><li class="chapter-item expanded "><a href="../object_reference/context.html"><strong aria-hidden="true">14.</strong> Context</a></li><li class="chapter-item expanded "><a href="../object_reference/buffer.html"><strong aria-hidden="true">15.</strong> Buffer</a></li><li class="chapter-item expanded "><a href="../object_reference/source.html"><strong aria-hidden="true">16.</strong> Source (abstract)</a></li><li class="chapter-item expanded "><a href="../object_reference/direct_source.html"><strong aria-hidden="true">17.</strong> DirectSource</a></li><li class="chapter-item expanded "><a href="../object_reference/spatialized_source.html"><strong aria-hidden="true">18.</strong> SpatializedSource (abstract)</a></li><li class="chapter-item expanded "><a href="../object_reference/panned_source.html"><strong aria-hidden="true">19.</strong> PannedSource</a></li><li class="chapter-item expanded "><a href="../object_reference/source_3d.html"><strong aria-hidden="true">20.</strong> Source3D</a></li><li class="chapter-item expanded "><a href="../object_reference/generator.html"><strong aria-hidden="true">21.</strong> Generator (abstract)</a></li><li class="chapter-item expanded "><a href="../object_reference/streaming_generator.html"><strong aria-hidden="true">22.</strong> StreamingGenerator</a></li><li class="chapter-item expanded "><a href="../object_reference/buffer_generator.html"><strong aria-hidden="true">23.</strong> BufferGenerator</a></li><li class="chapter-item expanded "><a href="../object_reference/noise_generator.html"><strong aria-hidden="true">24.</strong> NoiseGenerator</a></li><li class="chapter-item expanded "><a href="../object_reference/global_effect.html"><strong aria-hidden="true">25.</strong> GlobalEffect</a></li><li class="chapter-item expanded "><a href="../object_reference/echo.html"><strong aria-hidden="true">26.</strong> Echo</a></li><li class="chapter-item expanded "><a href="../object_reference/fdn_reverb.html"><strong aria-hidden="true">27.</strong> FdnReverb</a></li><li class="chapter-item expanded affix "><li class="part-title">Release notes</li><li class="chapter-item expanded "><a href="../releases/0.8.x.html"><strong aria-hidden="true">28.</strong> 0.8.X</a></li><li class="chapter-item expanded "><a href="../releases/pre-0.8.html"><strong aria-hidden="true">29.</strong> 0.0 to 0.7.x</a></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                        
                    </div>

                    <h1 class="menu-title">The Synthizer Manual</h1>

                    <div class="right-buttons">
                        
                        <a href="../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        
                        
                    </div>
                </div>

                
                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" name="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>
                

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1><a class="header" href="#events-alpha" id="events-alpha">Events (alpha)</a></h1>
<p>The following functionality is alpha.  In particular, significant changes are expected in the
0.9 release.  For the moment the only documentation is this tutorial; it will be improved after the planned 0.9 changes and
as part of the general pre-1.0 documentation project.</p>
<h2><a class="header" href="#introduction" id="introduction">Introduction</a></h2>
<p>Synthizer supports sending events.  Currently, it can send finished and looped events for both
BufferGenerator and StreamingGenerator.  This will be extended to other objects and concepts in future,
as appropriate.  The events have the following meanings:</p>
<ul>
<li>Finished: the generator isn't configured to loop and has reached the end.</li>
<li>Looped: The generator is configured to loop, and a loop was just completed.</li>
</ul>
<p>Events are disabled by default and must be enabled.  For C, this means <code>syz_contextEnableEvents(context)</code>. For Python, an additional keyword argument <code>enable_events = True</code>
can be passed to the Context constructor.</p>
<p>Once enabled, events feed a queue that can be polled with <code>syz_contextGetNextEvent</code>.  If events are enabled and the application never polls the queue, the queue will fill up forever; this is
effectively a memory leak.  In other words, only enable events if you know you'll actually use them.</p>
<p>C users are encouraged to read synthizer.h, in particular <code>struct syz_Event</code>.  See also the <code>enum SYZ_EVENT_TYPES</code> in <code>synthizer_constants.h</code>.  The basic idea is to call
<code>syz_contextGetNextEvent</code> until you get <code>SYZ_EVENT_TYPE_INVALID</code> indicating the end of the queue.</p>
<p>The events system will drop events which would refer to invalid handles on a best-effort basis, so that
an invalid handle is never returned to the caller of <code>syz_contextGetNextEvent</code>.  This is guaranteed to work as long as all deletion happens on the same thread as the event polling.  In future, Synthizer is going to switch handles
to a reference-counted scheme which will improve the concurrency story.</p>
<h2><a class="header" href="#a-python-tutorial" id="a-python-tutorial">A Python Tutorial</a></h2>
<p>In Python, events are exposed as an iterator on the context:</p>
<pre><code>for event in ctx.get_events():
    if isinstance(e, synthizer.FinishedEvent):
        # Handle finished
    elif isinstance(e, synthizer.LoopedEvent):
        # process
</code></pre>
<p><code>get_events</code> takes an optional argument to limit the number of events returned in one iteration.  By default, it's unlimited.</p>
<p>As shown above, you detect event types with <code>isinstance</code>.  Each event has a <code>source</code> and <code>context</code> property indicating the source (e.g. generator) and context associated with it, as Synthizer objects.
In future, other event types may include more information.</p>
<h2><a class="header" href="#notes" id="notes">Notes</a></h2>
<p>Events are currently alpha, as stated above.  Expect bugs.  In particular, there may be pathological cases in which </p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                        
                            <a rel="prev" href="../tutorials/python.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>
                        

                        
                            <a rel="next" href="../concepts/introduction.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>
                        

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                
                    <a rel="prev" href="../tutorials/python.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>
                

                
                    <a rel="next" href="../concepts/introduction.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
                
            </nav>

        </div>

        

        

        

        
        <script type="text/javascript">
            window.playground_copyable = true;
        </script>
        

        

        
        <script src="../elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../searcher.js" type="text/javascript" charset="utf-8"></script>
        

        <script src="../clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="../book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
        

        

    </body>
</html>
