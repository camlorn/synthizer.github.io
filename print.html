<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>The Synthizer Manual</title>
        
        <meta name="robots" content="noindex" />
        
        


        <!-- Custom HTML head -->
        


        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        
        <link rel="icon" href="favicon.svg">
        
        
        <link rel="shortcut icon" href="favicon.png">
        
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        
        <link rel="stylesheet" href="css/print.css" media="print">
        

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        
        <link rel="stylesheet" href="fonts/fonts.css">
        

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        

        
    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded "><a href="introduction.html"><strong aria-hidden="true">1.</strong> Introduction</a></li><li class="chapter-item expanded affix "><li class="part-title">Tutorials</li><li class="chapter-item expanded "><a href="tutorials/python.html"><strong aria-hidden="true">2.</strong> A Basic Python Tutorial</a></li><li class="chapter-item expanded "><a href="tutorials/events.html"><strong aria-hidden="true">3.</strong> Events (alpha)</a></li><li class="chapter-item expanded affix "><li class="part-title">Concepts</li><li class="chapter-item expanded "><a href="concepts/introduction.html"><strong aria-hidden="true">4.</strong> Introduction</a></li><li class="chapter-item expanded "><a href="concepts/stability.html"><strong aria-hidden="true">5.</strong> Stability Guarantees</a></li><li class="chapter-item expanded "><a href="concepts/signal_graph.html"><strong aria-hidden="true">6.</strong> The Signal Graph, Library Parameters, and limitations</a></li><li class="chapter-item expanded "><a href="concepts/conventions.html"><strong aria-hidden="true">7.</strong> C API Conventions</a></li><li class="chapter-item expanded "><a href="concepts/initialization.html"><strong aria-hidden="true">8.</strong> Logging, Initialization, and Shutdown</a></li><li class="chapter-item expanded "><a href="concepts/object_model.html"><strong aria-hidden="true">9.</strong> Objects, Handles, and Properties</a></li><li class="chapter-item expanded "><a href="concepts/streams.html"><strong aria-hidden="true">10.</strong> Streams</a></li><li class="chapter-item expanded "><a href="concepts/3d_panning.html"><strong aria-hidden="true">11.</strong> 3D Panning </a></li><li class="chapter-item expanded "><a href="concepts/channel_mixing.html"><strong aria-hidden="true">12.</strong> Channel Upmixing and Downmixing </a></li><li class="chapter-item expanded "><a href="concepts/effects.html"><strong aria-hidden="true">13.</strong> Effects and Effect Routing</a></li><li class="chapter-item expanded affix "><li class="part-title">The Object Reference</li><li class="chapter-item expanded "><a href="object_reference/context.html"><strong aria-hidden="true">14.</strong> Context</a></li><li class="chapter-item expanded "><a href="object_reference/buffer.html"><strong aria-hidden="true">15.</strong> Buffer</a></li><li class="chapter-item expanded "><a href="object_reference/source.html"><strong aria-hidden="true">16.</strong> Source (abstract)</a></li><li class="chapter-item expanded "><a href="object_reference/direct_source.html"><strong aria-hidden="true">17.</strong> DirectSource</a></li><li class="chapter-item expanded "><a href="object_reference/spatialized_source.html"><strong aria-hidden="true">18.</strong> SpatializedSource (abstract)</a></li><li class="chapter-item expanded "><a href="object_reference/panned_source.html"><strong aria-hidden="true">19.</strong> PannedSource</a></li><li class="chapter-item expanded "><a href="object_reference/source_3d.html"><strong aria-hidden="true">20.</strong> Source3D</a></li><li class="chapter-item expanded "><a href="object_reference/generator.html"><strong aria-hidden="true">21.</strong> Generator (abstract)</a></li><li class="chapter-item expanded "><a href="object_reference/streaming_generator.html"><strong aria-hidden="true">22.</strong> StreamingGenerator</a></li><li class="chapter-item expanded "><a href="object_reference/buffer_generator.html"><strong aria-hidden="true">23.</strong> BufferGenerator</a></li><li class="chapter-item expanded "><a href="object_reference/noise_generator.html"><strong aria-hidden="true">24.</strong> NoiseGenerator</a></li><li class="chapter-item expanded "><a href="object_reference/global_effect.html"><strong aria-hidden="true">25.</strong> GlobalEffect</a></li><li class="chapter-item expanded "><a href="object_reference/echo.html"><strong aria-hidden="true">26.</strong> Echo</a></li><li class="chapter-item expanded "><a href="object_reference/fdn_reverb.html"><strong aria-hidden="true">27.</strong> FdnReverb</a></li><li class="chapter-item expanded affix "><li class="part-title">Release notes</li><li class="chapter-item expanded "><a href="releases/0.8.x.html"><strong aria-hidden="true">28.</strong> 0.8.X</a></li><li class="chapter-item expanded "><a href="releases/pre-0.8.html"><strong aria-hidden="true">29.</strong> 0.0 to 0.7.x</a></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                        
                    </div>

                    <h1 class="menu-title">The Synthizer Manual</h1>

                    <div class="right-buttons">
                        
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        
                        
                    </div>
                </div>

                
                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" name="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>
                

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="introduction"><a class="header" href="#introduction">Introduction</a></h1>
<h1 id="a-basic-python-tutorial"><a class="header" href="#a-basic-python-tutorial">A Basic Python Tutorial</a></h1>
<h2 id="installation"><a class="header" href="#installation">Installation</a></h2>
<p>We support Python 3.  Python wheels for Windows X64 are published to Pypi, so to install:</p>
<pre><code class="language-bash">pip install synthizer
</code></pre>
<h2 id="some-basics"><a class="header" href="#some-basics">Some Basics</a></h2>
<p>Synthizer requires initialization and deinitialization. The best way to initialize Synthizer is to use the context manager:</p>
<pre><code class="language-python">with synthizer.initialized():
    # Code...
</code></pre>
<p>The context manager will handle deinitialization on exceptions.  Though <code>synthizer.initialize()</code> and <code>synthizer.shutdown()</code> are exposed, use is discouraged as the context manager ensures clean shutdown in (almost) all cases.</p>
<p>Once the library is deinitialized, calls into Synthizer error.</p>
<h2 id="destroying-objects"><a class="header" href="#destroying-objects">Destroying Objects</a></h2>
<p>Unlike the rest of Python, Synthizer objects represent concrete audio architecture, which need to have a defined lifetime in order to control when they are and aren't being heard,
and also to ensure that it can be well understood when things are and aren't using system resources.  To that end, Synthizer objects don't interact with Python garbage collection. When you're done with an object, call <code>myobj.destroy()</code>.</p>
<p>At the moment, failing to do so will permanently leak the object.  Work in future may lift this restriction, but it's still necessary to be explicit: if you aren't, things may be audioble longer than you intend.</p>
<h2 id="the-context"><a class="header" href="#the-context">The Context</a></h2>
<p>Most objects in Synthizer require a context, which represents a listener in 3D space, an audio output device, and other miscellaneous infrastructure.
Objects are passed a context on construction, and two objects from different contexts never interact.</p>
<p>To get a context:</p>
<pre><code class="language-python">ctx = synthizer.Context()
</code></pre>
<p>Currently, selecting audio output devices isn't supported, and audio will go to the system default.</p>
<h2 id="buffers-streams-and-generators"><a class="header" href="#buffers-streams-and-generators">Buffers, Streams, and Generators</a></h2>
<p>As elaborated in the concepts section, the Synthizer audio graph is as follows:</p>
<ul>
<li>A source is fed by one or more generators and pans audio.</li>
<li>All the sources feed the context's output.</li>
</ul>
<p>Generators are an abstract concept, which represents somewhere audio comes from. Specific kinds of generators implement the abstract interface in a concrete fashion,
notably <code>BufferGenerator</code> (takes a buffer) and <code>StreamingGenerator</code> (takes streaming parameters).</p>
<p>The easiest way to get audio into Synthizer is via streams.  Streams are specified as pre-parsed URL-like components:</p>
<ul>
<li>A protocol, <code>file</code> for example, which specifies where the audio comes from.</li>
<li>A path, which specifies where the audio is (i.e. path on disk, etc).</li>
<li>Options, of the form <code>key=value&amp;key=value&amp;...</code>.  At the moment, unused by anything, so just use <code>&quot;&quot;</code>.</li>
</ul>
<p>To play back a stream, you have two choices: you can use a <code>StreamingGenerator</code>, which takes these parameters directly and will decode in realtime, or you can use a <code>BufferGenerator</code>, which takes a pre-decoded buffer that you made previously from a strem specification.
You use <code>StreamingGenerator</code> for things like music and <code>BufferGenerator</code> for things like short sounds. Note that
<code>StreamingGenerator</code> is expensive and relatively high latency.</p>
<p>Buffers are in-memory decoded assets, essentially arrays of 16-bit samples resampled to Synthizer's samplerate. Note that they aren't actually contiguous arrays and are also immutable.</p>
<p>To get a streaming generator:</p>
<pre><code class="language-python">generator = synthizer.StreamingGenerator(ctx, &quot;file&quot;, &quot;test.wav&quot;)
</code></pre>
<p>To get a buffer from a stream:</p>
<pre><code class="language-python">buffer = synthizer.Buffer.from_stream(&quot;file&quot;, &quot;test.wav&quot;)
</code></pre>
<p>Note the following:</p>
<ul>
<li>Buffers aren't associated with a context and can be used anywhere,.</li>
<li>Buffers can be used simultaneously by multiple generators (or whatever else). You are encouraged to cache them and reuse them indefinitely.</li>
<li>When Synthizer needs to overload a constructor, it does so as staticmethods on the class. We don't have
multiple constructors here yet, but will in future.</li>
</ul>
<h2 id="sources"><a class="header" href="#sources">Sources</a></h2>
<p>Sources represent audio output.  They get one or more generators, combine them all, and output.  Currently we have the following kinds of sources:</p>
<ul>
<li>A PannedSource is manually controlled using azimuth and elevation or, alternatively, a panning scalar.</li>
<li>Source3D is a 3D environmental source with the usual things you'd expect: distance model, position, etc.</li>
</ul>
<h2 id="properties"><a class="header" href="#properties">Properties</a></h2>
<p>Synthizer offers the following kinds of properties:</p>
<ul>
<li>int, represented as either a Python integer type or an enum. An example of the latter case is <code>source.distance_model</code>, which is a <code>synthizer.DistanceModel</code>. Synthizer exposes enums as Python 3.4-style enums via Cython.</li>
<li>Double, which is self-explanatory.</li>
<li>Double3, which is a tuple of 3 doubles. Usually used as a position.</li>
<li>Double6, a tuple of 6 doubles. Usually used as an orientation (given a dedicated section below).</li>
<li>Object, i.e. <code>buffer_generator.buffer = b</code>.</li>
</ul>
<p>It is important to note that Synthizer properties are eventually consistent.  What this means is that code like the following doesn't do what you expect:</p>
<pre><code class="language-python">myobj.property = 0
myobj.property += 5
myobj.property += 5
# May or may not fail, depending on timing.
assert myobj.property == 10

myobj.property = 15
x = myobj.property
# may or may not fail depending on timing.
assert x == 15
</code></pre>
<p>Property reads are primarily useful for properties like position on various generators, where Synthizer is updating the property itself.
In general, it's best to use properties to tell Synthizer what to do, but keep the model of what's supposed to be going on in your code.
A common mistake is to try to use Synthizer to store data, for example putting the position of your objects in a source rather than maintaing the coordinates yourself.</p>
<p>Object properties are internally referenced in a weak fashion. That is to say that destroying (<code>.destroy()</code>)the object the property is set to will clear the property. </p>
<p>In the Python bindings, Synthizer translates <code>SYZ_P_MY_PROPERTY</code> to <code>obj.my_property</code>. The translations of the tables in the object reference are nearly mechanical, and this simple
transformation always tells you where the property lives in Python.</p>
<h2 id="an-aside-orientation-formulas"><a class="header" href="#an-aside-orientation-formulas">An aside: orientation formulas</a></h2>
<p>Before going much further, most people seem to eventually ask about trigonometry with respect to using a 3D audio library for 2D games. The high level overview
for those who already know trigonometry is that Synthizer's coordinate system is right-handed and orientations consist of 2 orthogonal unit vectors <code>(atx, aty, atz, upx, upy, upz)</code> stored
as a packed property so that they can both be set atomically.  But the longer version for those who don't know trigonometry is:</p>
<p>Degrees to radians is:</p>
<pre><code class="language-python">import math

def deg2rad(angle):
    return (angle / 180.0) * math.pi
</code></pre>
<p>People who don't know trig usually ask for orientations that are clockwise of north. To do that:</p>
<pre><code class="language-python">import math

def make_orientation(degrees):
    rad = deg2rad(angle)
    return (math.sin(rad), math.cos(rad), 0, 0, 0, 1)
</code></pre>
<p>Setting <code>context.orientation</code> to the result of the above will set things up so that you can treat positive x as east, positive y as north, and positive z as up. The default orientation faces the listener north.</p>
<h2 id="putting-it-together"><a class="header" href="#putting-it-together">Putting it Together</a></h2>
<p>To play a source in 3D space, do the following:</p>
<ul>
<li>Create a context.</li>
<li>Create a source.</li>
<li>Create a buffer.</li>
<li>Create a generator.</li>
<li><code>generator.buffer = buffer</code></li>
<li><code>source.add_generator(generator)</code></li>
<li>Then manipulate position, etc. on the source.</li>
</ul>
<h2 id="a-worked-example"><a class="header" href="#a-worked-example">A Worked Example</a></h2>
<p>The following is a 3D media player, the audio library equivalent of hello world. It supports the following commands:</p>
<ul>
<li><code>pause</code>, <code>play</code>: pause/play the source</li>
<li><code>seek &lt;seconds&gt;</code>: self-explanatory.</li>
<li><code>pos &lt;x&gt; &lt;y&gt; &lt;z&gt;</code>: move the source. X is right, y is forward, z is up.</li>
<li><code>loop</code>: Toggle looping of the generator.</li>
<li><code>gain &lt;value&gt;</code>: Control the gain of the generator, in DB.</li>
<li><code>quit</code>: self-explanatory.</li>
</ul>
<p>Note that the default distance model parameters cause the source to become completely silent at around 50 units out. Movements close to the head won't change the volume much. Also, HRTF improvements are coming.</p>
<p>This example also doesn't demonstrate destruction, as that's handled by library deinitialization and process shutdown. A proper program needs <code>source.destroy()</code> etc for dynamic sources, as explained above.</p>
<p>The code:</p>
<pre><code class="language-python">&quot;&quot;&quot;A simple media player, demonstrating the Synthizer basics.&quot;&quot;&quot;

import sys

import synthizer

if len(sys.argv) != 2:
    print(f&quot;Usage: {sys.argv[0]} &lt;file&gt;&quot;)
    sys.exit(1)

# Log to debug. At the moment this writes directly to stdout, but will in
#  future integrate with Python's logging modules.
# It's best to call this before any initialization.
synthizer.configure_logging_backend(synthizer.LoggingBackend.STDERR)
synthizer.set_log_level(synthizer.LogLevel.DEBUG)

with synthizer.initialized():
    # Get our context, which almost everything requires.
    # This starts the audio threads.
    ctx = synthizer.Context()

    # A BufferGenerator plays back a buffer:
    generator = synthizer.BufferGenerator(ctx)
    # A buffer holds audio data. We read from the specified file:
    buffer = synthizer.Buffer.from_stream(&quot;file&quot;, sys.argv[1])
    # Tell the generator to use the buffer.
    generator.buffer = buffer
    # A Source3D is a 3D source, as you'd expect.
    source = synthizer.Source3D(ctx)
    # It'll play the BufferGenerator.
    source.add_generator(generator)
    # Keep track of looping, since property reads are expensive:
    looping = False

    # A simple command parser.
    while True:
        cmd = input(&quot;Command: &quot;)
        cmd = cmd.split()
        if len(cmd) == 0:
            continue
        if cmd[0] == &quot;pause&quot;:
            source.pause()
        elif cmd[0] == &quot;play&quot;:
            source.play()
        elif cmd[0] == &quot;pos&quot;:
            if len(cmd) &lt; 4:
                print(&quot;Syntax: pos x y z&quot;)
                continue
            try:
                x, y, z = [float(i) for i in cmd[1:]]
            except ValueError:
                print(&quot;Unable to parse coordinates&quot;)
                continue
            source.position = (x, y, z)
        elif cmd[0] == &quot;seek&quot;:
            if len(cmd) != 2:
                print(&quot;Syntax: pos &lt;seconds&gt;&quot;)
                continue
            try:
                pos = float(cmd[1])
            except ValueError:
                print(&quot;Unable to parse position&quot;)
                continue
            try:
                generator.position = pos
            except synthizer.SynthizerError as e:
                print(e)
        elif cmd[0] == &quot;quit&quot;:
            break
        elif cmd[0] == &quot;loop&quot;:
            looping = not looping
            generator.looping = looping
            print(&quot;Looping&quot; if looping else &quot;Not looping&quot;)
        elif cmd[0] == &quot;gain&quot;:
            if len(cmd) != 2:
                print(&quot;Syntax: gain &lt;value&gt;&quot;)
                continue
            try:
                value = float(cmd[1])
            except ValueError:
                print(&quot;Unable to parse value.&quot;)
                continue
            # Convert to scalar gain from db.
            gain = 10 ** (value / 20)
            source.gain = gain
        else:
            print(&quot;Unrecognized command&quot;)
</code></pre>
<h1 id="events-alpha"><a class="header" href="#events-alpha">Events (alpha)</a></h1>
<p>The following functionality is alpha.  In particular, significant changes are expected in the
0.9 release.  For the moment the only documentation is this tutorial; it will be improved after the planned 0.9 changes and
as part of the general pre-1.0 documentation project.</p>
<h2 id="introduction-1"><a class="header" href="#introduction-1">Introduction</a></h2>
<p>Synthizer supports sending events.  Currently, it can send finished and looped events for both
BufferGenerator and StreamingGenerator.  This will be extended to other objects and concepts in future,
as appropriate.  The events have the following meanings:</p>
<ul>
<li>Finished: the generator isn't configured to loop and has reached the end.</li>
<li>Looped: The generator is configured to loop, and a loop was just completed.</li>
</ul>
<p>Events are disabled by default and must be enabled.  For C, this means <code>syz_contextEnableEvents(context)</code>. For Python, an additional keyword argument <code>enable_events = True</code>
can be passed to the Context constructor.</p>
<p>Once enabled, events feed a queue that can be polled with <code>syz_contextGetNextEvent</code>.  If events are enabled and the application never polls the queue, the queue will fill up forever; this is
effectively a memory leak.  In other words, only enable events if you know you'll actually use them.</p>
<p>C users are encouraged to read synthizer.h, in particular <code>struct syz_Event</code>.  See also the <code>enum SYZ_EVENT_TYPES</code> in <code>synthizer_constants.h</code>.  The basic idea is to call
<code>syz_contextGetNextEvent</code> until you get <code>SYZ_EVENT_TYPE_INVALID</code> indicating the end of the queue.</p>
<p>The events system will drop events which would refer to invalid handles on a best-effort basis, so that
an invalid handle is never returned to the caller of <code>syz_contextGetNextEvent</code>.  This is guaranteed to work as long as all deletion happens on the same thread as the event polling.  In future, Synthizer is going to switch handles
to a reference-counted scheme which will improve the concurrency story.</p>
<h2 id="a-python-tutorial"><a class="header" href="#a-python-tutorial">A Python Tutorial</a></h2>
<p>In Python, events are exposed as an iterator on the context:</p>
<pre><code>for event in ctx.get_events():
    if isinstance(e, synthizer.FinishedEvent):
        # Handle finished
    elif isinstance(e, synthizer.LoopedEvent):
        # process
</code></pre>
<p><code>get_events</code> takes an optional argument to limit the number of events returned in one iteration.  By default, it's unlimited.</p>
<p>As shown above, you detect event types with <code>isinstance</code>.  Each event has a <code>source</code> and <code>context</code> property indicating the source (e.g. generator) and context associated with it, as Synthizer objects.
In future, other event types may include more information.</p>
<h1 id="introduction-2"><a class="header" href="#introduction-2">Introduction</a></h1>
<p>This section of the manual introduces Synthizer concepts and should be read in order. Pages here will either explain something, or quote relevant sections of the C headers with explanation.</p>
<h1 id="stability-and-versioning"><a class="header" href="#stability-and-versioning">Stability and Versioning</a></h1>
<p>Synthizer uses pre-1.0 semantic versioning.  This means:</p>
<ul>
<li>Major is always 0.</li>
<li>Minor is incremented for incompatible API changes.</li>
<li>Patch is incremented for new features and/or bug fixes.</li>
</ul>
<p>Synthizer is intended to be production ready software, but has not seen wide usage.  It's somewhere between beta and 1.0: not as many features as you might want, but also not crashing at the drop of a hat.
If you find bugs, please report them <a href="https://github.com/synthizer/synthizer">against the official repository</a>.</p>
<p>API breakage is still expected.  This manual attempts to
document where API breakage may occur.  These are referred to as provisional features.</p>
<h1 id="the-signal-graph-library-parameters-and-limitations"><a class="header" href="#the-signal-graph-library-parameters-and-limitations">The Signal Graph, Library Parameters, and Limitations</a></h1>
<p>Synthizer's signal graph is as follows:</p>
<ul>
<li>1 or more generators feed a source.</li>
<li>1 or more sources feed:
<ul>
<li>A context, which is directly passed to audio output.</li>
<li>Optionally, any number of global effects.</li>
</ul>
</li>
</ul>
<p>Synthizer always processes audio at a sample rate of 44100, and with a fixed block size. All parameter updates take effect
at the block boundaries.  These parameters cannot be reconfigured without recompiling the library.  Synthizer will get the best latency it can for the system it's running on.  This can also not be controlled or influenced by the programmer.</p>
<p>Currently, the block size is 256 samples, or around 5 MS.  The authoritative source for this number is <code>include/synthizer/config.hpp</code> in the Synthizer repository.  The hope is that this may be lowered to 128 or better in future.</p>
<p>No audio input or output can be over 16 channels.  This limit may be raised in future.</p>
<p>Object handles are not reused, but there is a limit of 65535 concurrent outstanding object handles. This is due to an internal lockfree
slab which allows for relatively fast handle translation without syscalls.  If this limit proves problematic, it will be raised, but for all practical intents memory or CPU will be exhausted first.</p>
<h1 id="c-api-conventions"><a class="header" href="#c-api-conventions">C API Conventions</a></h1>
<p>The headers are:</p>
<ul>
<li><code>synthizer.h</code>: All library functions</li>
<li><code>synthizer_constants.h</code>: Constants, i.e. the very large property enum.</li>
</ul>
<p>The Synthizer C API returns errors and writes results to out parameters.  Out parameters are always the first parameters of a function, and errors are always nonzero.  Note that error codes are currently not defined; they will be, once things are more stable.</p>
<h1 id="logging-initialization-and-shutdown"><a class="header" href="#logging-initialization-and-shutdown">Logging, Initialization, and Shutdown</a></h1>
<p>The following excerpts from <code>synthizer.h</code> specify the loggin and initialization API. Explanation follows:</p>
<pre><code>typedef ... syz_Handle;

enum SYZ_LOGGING_BACKEND {
	SYZ_LOGGING_BACKEND_STDERR = 0,
};

SYZ_CAPI syz_ErrorCode syz_configureLoggingBackend(enum SYZ_LOGGING_BACKEND backend, void *param);

enum SYZ_LOG_LEVEL {
	SYZ_LOG_LEVEL_ERROR = 0,
	SYZ_LOG_LEVEL_WARN = 10,
	SYZ_LOG_LEVEL_INFO = 20,
	SYZ_LOG_LEVEL_DEBUG = 30,
};

SYZ_CAPI void syz_setLogLevel(enum SYZ_LOG_LEVEL level);

SYZ_CAPI syz_ErrorCode syz_initialize();
SYZ_CAPI syz_ErrorCode syz_shutdown();
</code></pre>
<p>Synthizer supports logging backends, which should be configured before calling <code>syz_initialize()</code> and never thereafter.  The <code>param</code> is backend specific, and unused for <code>stderr</code> (the only supported option). Log levels work exactly how one would expect and can be changed at any time.</p>
<p><code>syz_initialize() and </code>syz_shutdown()<code>initialize and shut the library down respectively.  Calls to these nest; every</code>syz_initialize<code>should be matched with a</code>syz_shutdown`.  This is supported so that multiple dependencies to a program can initialize Synthizer without conflict, but centralizing initialization and only doing it once is <em>strongly</em> encouraged.</p>
<h1 id="objects-handles-and-properties"><a class="header" href="#objects-handles-and-properties">Objects, Handles, and Properties</a></h1>
<p>Synthizer represents references to objects with a <code>syz_Handle</code> type.  The following excerpts from <code>synthizer.h</code> are available on every object type:</p>
<pre><code>SYZ_CAPI syz_ErrorCode syz_handleFree(syz_Handle handle);
SYZ_CAPI syz_ErrorCode syz_handleGetObjectType(int *out, syz_Handle handle);

SYZ_CAPI syz_ErrorCode syz_getI(int *out, syz_Handle target, int property);
SYZ_CAPI syz_ErrorCode syz_setI(syz_Handle target, int property, int value);
SYZ_CAPI syz_ErrorCode syz_getD(double *out, syz_Handle target, int property);
SYZ_CAPI syz_ErrorCode syz_setD(syz_Handle target, int property, double value);
SYZ_CAPI syz_ErrorCode syz_setO(syz_Handle target, int property, syz_Handle value);
SYZ_CAPI syz_ErrorCode syz_getD3(double *x, double *y, double *z, syz_Handle target, int property);
SYZ_CAPI syz_ErrorCode syz_setD3(syz_Handle target, int property, double x, double y, double z);
SYZ_CAPI syz_ErrorCode syz_getD6(double *x1, double *y1, double *z1, double *x2, double *y2, double *z2, syz_Handle target, int property);
SYZ_CAPI syz_ErrorCode syz_setD6(syz_Handle handle, int property, double x1, double y1, double z1, double x2, double y2, double z2);
</code></pre>
<p>Synthizer objects are like classes: they have properties, methods, and (optionally) bases. They're created through &quot;constructors&quot;, for example <code>syz_createContext</code>, and destroyed through <code>syz_handleFree</code>.
<code>syz_handleGetObjectType</code> can be used to query the type of an object at runtime, returning one of the <code>SYZ_OTYPE</code> constants
in <code>synthizer_constants.h</code>.  As with C's <code>malloc</code> and <code>free</code>, calling <code>syz_HandleFree</code>
with <code>handle = 0</code> is a no-op.</p>
<p>Property names are defined in <code>synthizer_constants.h</code> of the form <code>SYZ_P_FOO</code>.  Since some objects have common properties and in order to preserve flexibility, the property enum is shared between all objects.</p>
<p>Properties are set through <code>syz_setX</code> and read through <code>syz_getX</code> where <code>X</code> depends on the type:</p>
<ul>
<li><code>I</code> for integer</li>
<li><code>D</code> for double</li>
<li><code>O</code> for object.</li>
<li><code>D3</code> for double3, a packed vector of 3 doubles.</li>
<li><code>D6</code> for a packed array of 6 doubles, commonly used to represent orientations.</li>
</ul>
<p>Synthizer supports 5 property types: int, double, double3, double6, and object.</p>
<p>Double3 is typically used for position and double6 for orientation.  Synthizer's coordinate system is right-handed, configured so that positive y is forward, positive x east, and positive z up.  Listener orientation is controlled through the context.</p>
<p>Object properties hold handles to other objects.  This is a weak reference, so destroying
the object will set the property to null.  Note that it's not possible to read object properties.  This is because internal machinery
can block the audio thread because locking is required to safely manipulate handles in that case.</p>
<p>Property writes are always ordered with respect to other property writes on the same thread, and in general work how you would expect.  But it's important to note that reads are eventually consistent.  Specifically:</p>
<ul>
<li>Two writes from the same thread always happen in the order they were made in terms of audio output.</li>
<li>The ordering of writes also applies if the app uses synchronization such as mutexes.</li>
<li>But reads may not return the value just written, and in general return values at some point in the relatively recent past, usually on the order of 5 to 50MS.</li>
</ul>
<p>It is still useful to read some properties.  An example of this is <code>SYZ_P_POSITION</code> on <code>BufferGenerator</code>.  Even though Synthizer is returning values that are slightly out of date,
it's still good enough for UI purposes.  Additionally, even if Synthizer always returned the most recent value, audio latency introduces uncertainty as well.  For properties that Synthizer updates, additional effort is made
to keep the latency low enough for practical use, though there is always at least some.</p>
<p>The actual links between properties and objects are specified in this manual.</p>
<h1 id="streams"><a class="header" href="#streams">Streams</a></h1>
<p>Streams are sources of audio.  They are specified with 3 string parameters:</p>
<ul>
<li>protocol: The protocol. At the moment Synthizer only supports <code>&quot;file&quot;</code>.</li>
<li>path: The path. Interpreted ina  protocol-specific manner. For files, the on-disk path relative to the running execuable.</li>
<li>options: A string encoded as <code>&quot;key=value&amp;key=value&amp;...&quot;</code>. Protocol-specific options.</li>
</ul>
<p>Whenever a Synthizer API function wants to read audio data, it will request these three parameters to indicate where the data comes from.  In future, it will be possible to register your own streams.</p>
<p>The similarity to a URL is intentional.  We don't yet support parsing in that format, but may opt to do so in future.  Nonetheless it is simple for a host program to do that parsing before passing these parameters to Synthizer, and in particular <code>file://</code> URLs match the <code>file</code> protocol exactly.</p>
<p>Synthizer supports decoding Flac, Wav, and MP3. Ogg is planned but low priority.</p>
<h1 id="3d-panning"><a class="header" href="#3d-panning">3D Panning</a></h1>
<p>This page explains the steps involved in 3D panning. Note that only the panner strategy applies to <code>PannedSource</code>.</p>
<h2 id="1-convert-the-sources-position-from-world-coordinates-to-azimuth-elevation-and-distance"><a class="header" href="#1-convert-the-sources-position-from-world-coordinates-to-azimuth-elevation-and-distance">1. Convert the source's position from world coordinates to Azimuth, Elevation, and distance</a></h2>
<p>This is done by converting the position, at, and up vectors to a transformation matrix.  The result is a position in listener coordinates. Then application of the pythagorean theorem and basic trigonometry gets to spherical coordinates.</p>
<h2 id="2-compute-the-gain-from-the-distance-model"><a class="header" href="#2-compute-the-gain-from-the-distance-model">2. Compute the Gain from the Distance Model</a></h2>
<p>Let <code>d</code> be the distance to the source, <code>d_ref</code> the reference distance, <code>d_max</code> the max distance, <code>r</code> the roll-off factor. Then the gain of the source is computed as a linear scalar using one of the following formulas:</p>
<table><thead><tr><th>Model</th><th>Formula</th></tr></thead><tbody>
<tr><td>SYZ_DISTANCE_MODEL_NONE</td><td><code>1.0</code></td></tr>
<tr><td>SYZ_DISTANCE_MODEL_LINEAR</td><td>1 - r * (clamp(d, d_ref, d_max) - d_ref) / (d_max - d_ref);</td></tr>
<tr><td>SYZ_DISTANCE_MODEL_EXPONENTIAL when <code>d_ref == 0.0</code></td><td>0.0</td></tr>
<tr><td>SYZ_DISTANCE_MODEL_EXPONENTIAL when <code>d_ref &gt; 0.0</code></td><td><code>(max(d_ref, d) / d_ref) ** -r</code></td></tr>
<tr><td>SYZ_DISTANCE_MODEL_INVERSE when <code>d_ref = 0.0</code></td><td><code>0.0</code></td></tr>
<tr><td>SYZ_DISTANCE_MODEL_INVERSE when <code>d_ref &gt; 0.0</code></td><td><code>d_ref / (d_ref + r * max(d, d_ref) - d_ref)</code></td></tr>
</tbody></table>
<p>Qualitatively, <code>d_ref</code> is the &quot;size&quot; of the source, <code>d_max</code> is where the source is silent, <code>r</code> is how fast the source becomes quieter.  Mapping these to real world scenarios is difficult, and in general the best approach is to experiment for your use case.</p>
<h2 id="3-apply-the-closeness-boost-and-clamp"><a class="header" href="#3-apply-the-closeness-boost-and-clamp">3. Apply the closeness boost and clamp</a></h2>
<p>The closeness boost, specified through <code>SYZ_P_CLOSENESS_BOOST</code> and <code>SYZ_P_CLOSENESS_BOOST_DISTANCE</code> is used to emphasize sources that have crossed a threshold of interest, i.e. because the player is now close enough to interact.
<code>SYZ_P_CLOSENESS_BOOST</code> specifies a gain in DB (negative DB is allowed) which is added to the source's gain when the source is closer than <code>SYZ_P_CLOSENESS_BOOST_DISTANCE</code>.</p>
<p>After the closeness boost is applied, gain is clamped to the range 0.0 to 1.0.</p>
<h2 id="4-apply-the-panning-strategy"><a class="header" href="#4-apply-the-panning-strategy">4. Apply the Panning Strategy</a></h2>
<p>The panning strategy specifies how sources are to be panned.  SYnthizer supports the following panning strategies:</p>
<table><thead><tr><th>Strategy</th><th>Channels</th><th>Description</th></tr></thead><tbody>
<tr><td>SYZ_PANNER_STRATEGY_HRTF</td><td>2</td><td>An HRTF implementation, intended for use via headphones.</td></tr>
<tr><td>SYZ_PANNER_STRATEGY_STEREO</td><td>2</td><td>A simple stereo panning strategy assuming speakers are at -90 and 90.</td></tr>
</tbody></table>
<h1 id="channel-upmixing-and-downmixing"><a class="header" href="#channel-upmixing-and-downmixing">Channel Upmixing and Downmixing</a></h1>
<p>Synthizer's current channel mixing algorithm is as follows:</p>
<ul>
<li>Mono to anything duplicates in all channels.</li>
<li>Anything to mono sums all channels and divides.</li>
<li>Otherwise, missing channels are zero-initialized and extra channels are dropped.</li>
</ul>
<p>Though this algorithm will be extended in future, note that Synthizer is for games and VR applications, and that it is usually impossible to determine channel layout from media files with 100% reliability.
When better support is added, this page wil be extended explaining how it works, but expect to need to perform media type conversions or to add stream options if working with more than 2 channels per asset.</p>
<h1 id="effects-and-effect-routing"><a class="header" href="#effects-and-effect-routing">Effects and Effect Routing</a></h1>
<p>IMPORTANT: the effects API is provisional and subject to change for the time being.  At the moment this is a hopefully final rough draft of the functionality, but experience is
required to determine if it can be stabilized in the current form.</p>
<p>Synthizer will support two kinds of effects: global effects and generator-specific effects.  At the moment, only global effects are implemented.</p>
<p>users of the Synthizer API can route any number of sources to any number of global effects, for example <a href="concepts/../object_reference/echo.html">echo</a>.  This is done through the following C API:</p>
<pre><code>struct syz_RouteConfig {
	float gain;
	float fade_time;
};

SYZ_CAPI syz_ErrorCode syz_routingConfigRoute(syz_Handle context, syz_Handle output, syz_Handle input, struct syz_RouteConfig *config);
SYZ_CAPI syz_ErrorCode syz_routingRemoveRoute(syz_Handle context, syz_Handle output, syz_Handle input, float fade_out);
</code></pre>
<p>Routes are uniquely identified by the output object (Source3D, etc) and input object (Echo, etc).  There is no route handle
type, nor is it possible to form duplicate routes.</p>
<p>In order to establish or update the parameters of a route, use <code>syz_routingConfigRoute</code>.  This will form a route if there wasn't already one, and update the parameters
as necessary.</p>
<p>Gains are per route and apply after the gain of the source.
For example, you might feed 70% of a source's output to something (gain = 0.7).</p>
<p>In order to remove a route, use <code>syz_routingRemoveRoute</code>.</p>
<p>Both of these functions support crossfading provided in seconds.  Internally, this is truncated to the nearest block.  As an exception to this rule, non-zero fade times always give at least one block,
under the assumption that if some fading was requested the goal was to avoid clipping.  Specifically, in pseudocode:</p>
<pre><code>blocks = truncate(fade * SR / BLOCK_SIZE)
if blocks == 0 and fade != 0:
    blocks = 1
</code></pre>
<p>This manual doesn't document global effects as distinct entities because Synthizer is internally designed to allow for object reuse in future when we support
per-generator effects.  Specifically, an object like <a href="concepts/../object_reference/echo.html">Echo</a> will often be able to be used in both positions.</p>
<p>Many effects involve feedback and/or other long-running audio as part of their intended function. But while in development, it is often useful to reset an effect.  Synthizer exposes a function for this purpose:</p>
<pre><code>SYZ_CAPI syz_ErrorCode syz_effectReset(syz_Handle effect);
</code></pre>
<p>Which will work on any effect (at most, it does nothing).  As with things like property access this is slow, and it's also not going to sound good, but it can do things like clear out the feedback paths of a reverb at the Python shell for interactive experimentation purposes.
If there's enough demand to make resetting a normal operation, it would be possible to extend it to become one, but not without significant pending work for other things being in place first.</p>
<h1 id="context"><a class="header" href="#context">Context</a></h1>
<h2 id="constructors"><a class="header" href="#constructors">Constructors</a></h2>
<h3 id="syz_createcontext"><a class="header" href="#syz_createcontext"><code>syz_createContext</code></a></h3>
<pre><code>SYZ_CAPI syz_ErrorCode syz_createContext(syz_Handle *out);
</code></pre>
<p>Creates a context configured to play through the default output device.</p>
<h2 id="properties-1"><a class="header" href="#properties-1">Properties</a></h2>
<table><thead><tr><th>Enum</th><th>Type</th><th>Default</th><th>Range</th><th>Description</th></tr></thead><tbody>
<tr><td>SYZ_P_GAIN</td><td>double</td><td>1.0</td><td>value &gt;= 0.0</td><td>The gain of the context</td></tr>
<tr><td>SYZ_P_POSITION</td><td>double3</td><td>(0, 0, 0)</td><td>any</td><td>The position of the listener.</td></tr>
<tr><td>SYZ_P_ORIENTATION</td><td>double6</td><td>(0, 1, 0, 0, 0, 1)</td><td>Two packed unit vectors</td><td>The orientation of the listener as <code>(atx, aty, atz, upx, upy, upz)</code>.</td></tr>
<tr><td>SYZ_P_DISTANCE_MODEL</td><td>int</td><td>SYZ_DISTANCE_MODEL_LINEAR</td><td>any SYZ_DISTANCE_MODEL</td><td>The default distance model for new sources.</td></tr>
<tr><td>SYZ_P_DISTANCE_REF</td><td>double</td><td>1.0</td><td>value &gt;= 0.0</td><td>The default reference distance for new sources.</td></tr>
<tr><td>SYZ_P_DISTANCE_MAX</td><td>double</td><td>50.0</td><td>value &gt;= 0.0</td><td>The default max distance for new sources.</td></tr>
<tr><td>SYZ_P_ROLLOFF</td><td>double</td><td>1.0</td><td>value &gt;= 0.0</td><td>The default rolloff for new sources.</td></tr>
<tr><td>SYZ_P_CLOSENESS_BOOST</td><td>double</td><td>0.0</td><td>any finite double</td><td>The default closeness boost for new sources in DB.</td></tr>
<tr><td>SYZ_P_CLOSENESS_BOOST_DISTANCE</td><td>double</td><td>0.0</td><td>value &gt;= 0.0</td><td>The default closeness boost distance for new sources</td></tr>
<tr><td>SYZ_P_PANNER_STRATEGY</td><td>int</td><td>SYZ_PANNER_STRATEGY_STEREO</td><td>any SYZ_PANNER_STRATEGY</td><td>The default panner strategy for new sources.</td></tr>
</tbody></table>
<h2 id="functions"><a class="header" href="#functions">Functions</a></h2>
<h3 id="syz_pause-syz_play"><a class="header" href="#syz_pause-syz_play"><code>syz_pause</code>, <code>syz_play</code></a></h3>
<pre><code>syz_ErrorCode syz_pause(syz_Handle object);
syz_ErrorCode syz_play(syz_Handle object);
</code></pre>
<p>The standard play/pause functions, which do exactly what their name suggests.</p>
<p>When the context is paused, nothing it manages advances and no audio is audible.</p>
<h2 id="remarks"><a class="header" href="#remarks">Remarks</a></h2>
<p>The context is the main entrypoint to Synthizer, responsible for the following:</p>
<ul>
<li>Control and manipulation of the audio device.</li>
<li>Driving the audio threads.</li>
<li>Owning all objects that play together.</li>
<li>Representing the listener in 3D space.</li>
</ul>
<p>All objects which are associated with a context take a context as part of all their constructors.  Two objects which are both associated with different contexts should never interact.
For efficiency, whether two objects are from different contexts is unvalidated, and the behavior of mixing them is undefined.</p>
<p>All objects associated with a context become useless once the context is destroyed.  Calls to them will still work, but they can't be reassociated with a different context and no audioble output will result.</p>
<p>Most programs create one context and destroy it at shutdown.</p>
<p>For the time being, all contexts output stereo audio, and it is not possible to specify the output device. These restrictions will be lifted in future.</p>
<p>For information on the meaning of the distance model properties, see <a href="object_reference/../concepts/3d_panning.html">3D Panning</a>.</p>
<h1 id="buffer"><a class="header" href="#buffer">Buffer</a></h1>
<h2 id="constructors-1"><a class="header" href="#constructors-1">Constructors</a></h2>
<h3 id="syz_createbufferfromstream"><a class="header" href="#syz_createbufferfromstream"><code>syz_createBufferFromStream</code></a></h3>
<pre><code>SYZ_CAPI syz_ErrorCode syz_createBufferFromStream(syz_Handle *out, const char *protocol, const char *path, const char *options);
</code></pre>
<p>Currently, the only way to make a buffer is from a stream, in the self-explanatory manner. See <a href="object_reference/../concepts/streams.html">Streams</a> for information on streams.</p>
<p>This call will decode the stream in the calling thread, returning errors as necessary. Synthizer will eventually offer a BufferCache which supports background decoding and caching, but for the moment the responsibility of background decoding is placed on the calling program.</p>
<h2 id="properties-2"><a class="header" href="#properties-2">Properties</a></h2>
<p>None.</p>
<h2 id="functions-1"><a class="header" href="#functions-1">Functions</a></h2>
<h3 id="getters"><a class="header" href="#getters">Getters</a></h3>
<pre><code>SYZ_CAPI syz_ErrorCode syz_bufferGetChannels(unsigned int *out, syz_Handle buffer);
SYZ_CAPI syz_ErrorCode syz_bufferGetLengthInSamples(unsigned int *out, syz_Handle buffer);
SYZ_CAPI syz_ErrorCode syz_bufferGetLengthInSeconds(double *out, syz_Handle buffer);
</code></pre>
<p>The self-explanatory getters. These aren't properties because they can't be written and they shouldn't participate in the property infrastructure.</p>
<h2 id="remarks-1"><a class="header" href="#remarks-1">Remarks</a></h2>
<p>Buffers hold audio data, as a collection of contiguous chunks.  Data is resampled to the Synthizer samplerate and converted to 16-bit PCM using triangular dither.</p>
<p>Buffers are one of the few Synthizer objects that don't require a context.  They may be used freely with any object requiring a buffer, from any thread.  In order to facilitate this, buffers are immutable after creation.</p>
<p>The approximate memory usage of a buffer in bytes is <code>2 * channels * duration_in_seconds * 44100</code>.  Loading large assets into buffers is not recommended. For things such as music tracks, use <a href="object_reference/./streaming_generator.html">StreamingGenerator</a>s.  Note that on 32-bit architectures, some operating systems only allow a 2 gigabyte address space.  Synthizer avoids allocating buffers as contiguous arrays in part to allow efficient use of 32-bit address spaces, but this only goes so far.  If on a 32-bit architecture, expect to run out of memory from Synthizer's perspective well before decoding 2 Gigabytes of buffers simultaneously due to the inability to find consecutive free pages.</p>
<h1 id="source-abstract"><a class="header" href="#source-abstract">Source (abstract)</a></h1>
<h2 id="constructors-2"><a class="header" href="#constructors-2">Constructors</a></h2>
<p>None.</p>
<h2 id="properties-3"><a class="header" href="#properties-3">Properties</a></h2>
<table><thead><tr><th>Enum</th><th>Type</th><th>Default</th><th>Range</th><th>Description</th></tr></thead><tbody>
<tr><td>SYZ_P_GAIN</td><td>double</td><td>Any double &gt; 0</td><td>An additional gain factor applied to this source.</td><td></td></tr>
</tbody></table>
<h2 id="functions-2"><a class="header" href="#functions-2">Functions</a></h2>
<h3 id="syz_sourceaddgenerator-syz_sourceremovegenerator"><a class="header" href="#syz_sourceaddgenerator-syz_sourceremovegenerator"><code>syz_sourceAddGenerator</code>, <code>syz_sourceRemoveGenerator</code></a></h3>
<pre><code>SYZ_CAPI syz_ErrorCode syz_sourceAddGenerator(syz_Handle source, syz_Handle generator);
SYZ_CAPI syz_ErrorCode syz_sourceRemoveGenerator(syz_Handle source, syz_Handle generator);
</code></pre>
<p>Add/remove a generator from a source. Each generator may be added once and duplicate add calls will have no effect. Each generator should only be used with one source at a time.</p>
<h3 id="syz_pause-syz_play-1"><a class="header" href="#syz_pause-syz_play-1"><code>syz_pause</code>, <code>syz_play</code></a></h3>
<pre><code>syz_ErrorCode syz_pause(syz_Handle object);
syz_ErrorCode syz_play(syz_Handle object);

</code></pre>
<p>The standard play/pause functions.  Note that all subclasses of Source will still process panners for the time being,
so this doesn't make a Source free in terms of things like HRTF and effect sends.  This case will be optimized further in future.</p>
<p>When a Source is paused, no generator connected to it advances even if the generator is unpaused.</p>
<h2 id="remarks-2"><a class="header" href="#remarks-2">Remarks</a></h2>
<p>Sources represent audio output.  They combine all generators connected to them, apply any effects if necessary, and feed the context. Subclasses of Source add panning and other features.</p>
<h1 id="directsource"><a class="header" href="#directsource">DirectSource</a></h1>
<p>Inherits from Source.</p>
<h2 id="constructors-3"><a class="header" href="#constructors-3">Constructors</a></h2>
<h3 id="syz_createdirectsource"><a class="header" href="#syz_createdirectsource"><code>syz_createDirectSource</code></a></h3>
<pre><code>SYZ_CAPI syz_ErrorCode syz_createDirectSource(syz_Handle *out, syz_Handle context);
</code></pre>
<p>Creates a direct source.</p>
<h2 id="properties-4"><a class="header" href="#properties-4">Properties</a></h2>
<p>Inherited from Source only.</p>
<h2 id="remarks-3"><a class="header" href="#remarks-3">Remarks</a></h2>
<p>A direct source is for music and other audio assets that don't wish to participate in panning, , and should be linked directly to speakers.</p>
<p>Audio is converted to the Context's channel count and passed directly through.</p>
<h1 id="spatializedsource-abstract"><a class="header" href="#spatializedsource-abstract">SpatializedSource (abstract)</a></h1>
<h2 id="constructors-4"><a class="header" href="#constructors-4">Constructors</a></h2>
<p>None</p>
<h2 id="properties-5"><a class="header" href="#properties-5">Properties</a></h2>
<table><thead><tr><th>Enum</th><th>Type</th><th>Default</th><th>Range</th><th>Description</th></tr></thead><tbody>
<tr><td>SYZ_P_PANNER_STRATEGY</td><td>int</td><td>SYZ_PANNER_STRATEGY_HRTF</td><td>any SYZ_PANNER_STRATEGY</td><td>The panner strategy for this source.</td></tr>
</tbody></table>
<h2 id="remarks-4"><a class="header" href="#remarks-4">Remarks</a></h2>
<p>SpatializedSource is an abstract class which gives all panned sources their distance model and gain.</p>
<h1 id="pannedsource"><a class="header" href="#pannedsource">PannedSource</a></h1>
<p>Inherits from <a href="object_reference/./spatialized_source.html">SpatializedSource</a>.</p>
<h2 id="constructors-5"><a class="header" href="#constructors-5">Constructors</a></h2>
<h3 id="syz_createpannedsource"><a class="header" href="#syz_createpannedsource"><code>syz_createPannedSource</code></a></h3>
<pre><code>SYZ_CAPI syz_ErrorCode syz_createPannedSource(syz_Handle *out, syz_Handle context);
</code></pre>
<p>Creates a panned source.</p>
<h3 id="properties-6"><a class="header" href="#properties-6">Properties</a></h3>
<table><thead><tr><th>Enum</th><th>Type</th><th>Default</th><th>Range</th><th>Description</th></tr></thead><tbody>
<tr><td>SYZ_P_AZIMUTH</td><td>double</td><td>0.0</td><td>0.0 to 360.0</td><td>The azimuth of the panner. See remarks.</td></tr>
<tr><td>SYZ_P_ELEVATION</td><td>double</td><td>0.0</td><td>-90.0 to 90.0</td><td>See remarks</td></tr>
<tr><td>SYZ_P_PANNING_SCALAR</td><td>double</td><td>0.0</td><td>-1.0 to 1.0</td><td>see remarks</td></tr>
</tbody></table>
<h1 id="remarks-5"><a class="header" href="#remarks-5">Remarks</a></h1>
<p>The PannedSource gives direct control over a panner, which is either controlled via azimuth/elevation in degrees or a panning scalar.</p>
<p>If using azimuth/elevation, 0.0 azimuth is forward and positive angles are clockwise.  Elevation ranges from -90 (down) to 90 (up).</p>
<p>Some applications want to control panners through a panning scalar instead, i.e. for UI purposes. If using panning scalars, -1.0 is full left and 1.0 is full right.</p>
<p>Applications should use either a panning scalar or azimuth/elevation, never both on the same source.  Using both simultaneously is undefined behavior.</p>
<p>For information on panning, see <a href="object_reference/../concepts/3d_panning.html">3D Panning</a>.</p>
<h1 id="source3d"><a class="header" href="#source3d">Source3D</a></h1>
<p>Inherits from <a href="object_reference/./spatialized_source.html">SpatializedSource</a>.</p>
<h2 id="constructors-6"><a class="header" href="#constructors-6">Constructors</a></h2>
<h3 id="syz_createsource3d"><a class="header" href="#syz_createsource3d"><code>syz_createSource3D</code></a></h3>
<pre><code>SYZ_CAPI syz_ErrorCode syz_createSource3D(syz_Handle *out, syz_Handle context);
</code></pre>
<p>Creates a source3d positioned at the origin and with no associated generators.</p>
<h2 id="properties-7"><a class="header" href="#properties-7">Properties</a></h2>
<table><thead><tr><th>Enum</th><th>Type</th><th>Default</th><th>Range</th><th>Description</th></tr></thead><tbody>
<tr><td>SYZ_P_POSITION</td><td>double3</td><td>(0, 0, 0)</td><td>any</td><td>The position of the sourec.</td></tr>
<tr><td>SYZ_P_ORIENTATION</td><td>double6</td><td>(0, 1, 0, 0, 0, 1)</td><td>Two packed unit vectors</td><td>The orientation of the source as <code>(atx, aty, atz, upx, upy, upz)</code>. Currently unused.</td></tr>
<tr><td>SYZ_P_DISTANCE_MODEL</td><td>int</td><td>from Context</td><td>any SYZ_DISTANCE_MODEL</td><td>The distance model for this source.</td></tr>
<tr><td>SYZ_P_DISTANCE_REF</td><td>double</td><td>From Context</td><td>value &gt;= 0.0</td><td>The reference distance.</td></tr>
<tr><td>SYZ_P_DISTANCE_MAX</td><td>double</td><td>From Context</td><td>value &gt;= 0.0</td><td>The max distance for this source.</td></tr>
<tr><td>SYZ_P_ROLLOFF</td><td>double</td><td>From Context</td><td>value &gt;= 0.0</td><td>The rolloff for this source.</td></tr>
<tr><td>SYZ_P_CLOSENESS_BOOST</td><td>double</td><td>From Context</td><td>any finite double</td><td>The closeness boost for this source in DB.</td></tr>
<tr><td>SYZ_P_CLOSENESS_BOOST_DISTANCE</td><td>double</td><td>From Context</td><td>value &gt;= 0.0</td><td>The closeness boost distance for this source.</td></tr>
</tbody></table>
<h2 id="remarks-6"><a class="header" href="#remarks-6">Remarks</a></h2>
<p>A Source3D represents an entity in 3D space.  For explanations of the above properties, see <a href="object_reference/../concepts/3d_panning.html">3D Panning</a>.</p>
<p>When created, Source3D reads all of its defaults from the Context's corresponding properties.  Changes to the Context versions don't affect already created sources.  A typical use case is to configure the Context to the defaults of the game, and then create sources.</p>
<h1 id="generator-abstract"><a class="header" href="#generator-abstract">Generator (abstract)</a></h1>
<p>Generators generate audio, and are how Synthizer knows what to play through sources. In addition to direct
generation, some generators take other generators as arguments, e.g. per-source effects and filters.</p>
<h2 id="properties-8"><a class="header" href="#properties-8">Properties</a></h2>
<p>All generators support the following properties:</p>
<table><thead><tr><th>Enum</th><th>Type</th><th>Default</th><th>Range</th><th>Description</th></tr></thead><tbody>
<tr><td>SYZ_P_GAIN</td><td>double</td><td>1.0</td><td>value &gt;= 0.0</td><td>The gain of the generator.</td></tr>
<tr><td>SYZ_P_PITCH_BEND</td><td>double</td><td>1.0</td><td>value &gt;= 0.0</td><td>Pitch bend of the generator as a multiplier (2.0 is +1 octave, 0.5 is -1 octave, etc)</td></tr>
</tbody></table>
<h2 id="functions-3"><a class="header" href="#functions-3">Functions</a></h2>
<h3 id="syz_pause-syz_play-2"><a class="header" href="#syz_pause-syz_play-2"><code>syz_pause</code>, <code>syz_play</code></a></h3>
<pre><code>syz_ErrorCode syz_pause(syz_Handle object);
syz_ErrorCode syz_play(syz_Handle object);

</code></pre>
<p>The standard play/pause functions, which do exactly what their name suggests.</p>
<h2 id="remarks-7"><a class="header" href="#remarks-7">Remarks</a></h2>
<p>Not all generators support <code>SYZ_P_PITCH_BEND</code> because it doesn't necessarily make sense for them to do so.  Where this is the case, this manual
will document that in the remarks for that generator type.  Additionally, in cases where
<code>SYZ_P_PITCH_BEND</code> has non-obvious behavior, the remarks will document that as well.  The most common place to se non-obvious <code>SYZ_P_PITCH_BEND</code> behavior is in effects.</p>
<h1 id="streaminggenerator"><a class="header" href="#streaminggenerator">StreamingGenerator</a></h1>
<p>Inherits from <a href="object_reference/./generator.html">Generator</a>.</p>
<h2 id="constructors-7"><a class="header" href="#constructors-7">Constructors</a></h2>
<h3 id="syz_createstreaminggenerator"><a class="header" href="#syz_createstreaminggenerator"><code>syz_createStreamingGenerator</code></a></h3>
<pre><code>SYZ_CAPI syz_ErrorCode syz_createStreamingGenerator(syz_Handle *out, syz_Handle context, const char *protocol, const char *path, const char *options);
</code></pre>
<p>Creates a StreamingGenerator from the standard <a href="object_reference/../concepts/streams.html">stream parameters</a>.</p>
<h2 id="properties-9"><a class="header" href="#properties-9">Properties</a></h2>
<table><thead><tr><th>Enum</th><th>Type</th><th>Default Value</th><th>Range</th><th>Description</th></tr></thead><tbody>
<tr><td>SYZ_P_POSITION</td><td>double</td><td>0.0</td><td>value &gt;= 0.0</td><td>The position in of the stream.</td></tr>
<tr><td>SYZ_P_LOOPING</td><td>int</td><td>0</td><td>0 or 1</td><td>Whether playback loops</td></tr>
</tbody></table>
<h2 id="remarks-8"><a class="header" href="#remarks-8">Remarks</a></h2>
<p>StreamingGenerator plays streams, decoding and reading on demand.  The typical use case is for music playback.</p>
<p>Due to the expense of streaming from disk and other I/O sources, having more than a few StreamingGenerators going will cause a decrease in audio quality on many systems, typically manifesting as drop--outs and crackling.
StreamingGenerator creates one background thread per instance and does all decoding and I/O in that thread.</p>
<p>At startup, StreamingGenerator's background thread eagerly decodes a relatively large amount of data in order to build up a buffer which prevents underruns.
Thereafter, it will pick up property changes every time the background thread wakes up to add more data to the buffer.  This means that most operations are high latency, currently on the order of 100 to 200 MS.
The least latent operation is the initial start-up, which will begin playing as soon as enough data is decoded.  How long that takes depends on the format and I/O characteristics of the stream, as well as
the user's machine and current load of the system.</p>
<h1 id="buffergenerator"><a class="header" href="#buffergenerator">BufferGenerator</a></h1>
<p>Inherits from <a href="object_reference/./generator.html">Generator</a>.</p>
<h2 id="constructors-8"><a class="header" href="#constructors-8">Constructors</a></h2>
<h3 id="syz_createbuffergenerator"><a class="header" href="#syz_createbuffergenerator"><code>syz_createBufferGenerator</code></a></h3>
<pre><code>SYZ_CAPI syz_ErrorCode syz_createBufferGenerator(syz_Handle *out, syz_Handle context);
</code></pre>
<p>Creates a BufferGenerator. The buffer is set to NULL and the resulting generator will play silence until one is associated.</p>
<h2 id="properties-10"><a class="header" href="#properties-10">Properties</a></h2>
<table><thead><tr><th>Enum</th><th>Type</th><th>Default Value</th><th>Range</th><th>Description</th></tr></thead><tbody>
<tr><td>SYZ_P_BUFFER</td><td>Object</td><td>0</td><td>Any Buffer handle</td><td>The buffer to play</td></tr>
<tr><td>SYZ_P_POSITION</td><td>double</td><td>0.0</td><td>value &gt;= 0.0</td><td>The position in the buffer.</td></tr>
<tr><td>SYZ_P_LOOPING</td><td>int</td><td>0</td><td>0 or 1</td><td>Whether playback loops at the end of the buffer.</td></tr>
</tbody></table>
<h2 id="remarks-9"><a class="header" href="#remarks-9">Remarks</a></h2>
<p>BufferGenerators play <a href="object_reference/./buffer.html">Buffer</a>s.</p>
<p><code>SYZ_P_POSITION</code> is reset if <code>SYZ_P_BUFFER</code> is modified.</p>
<p><code>SYZ_P_POSITION</code> can be set past the end of the buffer.  If <code>SYZ_P_LOOPING = 0</code>, the generator will play silence.  Otherwise, the position will immediately loop to the beginning.</p>
<p>More than one BufferGenerator can use the same underlying Buffer.</p>
<p><code>SYZ_P_PITCH_BEND</code> is a multiplicative rate on the playback of the buffer.  Though this clarification is currently unimportant, the difference between this and it being <em>the</em> rate
is that it will eventually be combined with doppler effects.  A value of 2.0 is one octave higher. A value of 0.5 is one octave lower.  Expect <code>SYZ_P_PITCH_BEND</code> to move to a base &quot;class&quot; in future:
though we only support it for buffers at the moment, many other generator types will be able to do so in future.</p>
<h1 id="noisegenerator"><a class="header" href="#noisegenerator">NoiseGenerator</a></h1>
<p>Inherits from <a href="object_reference/./generator.html">Generator</a>.</p>
<h2 id="constructors-9"><a class="header" href="#constructors-9">Constructors</a></h2>
<h3 id="syz_createnoisegenerator"><a class="header" href="#syz_createnoisegenerator"><code>syz_createNoiseGenerator</code></a></h3>
<pre><code>SYZ_CAPI syz_ErrorCode syz_createNoiseGenerator(syz_Handle *out, syz_Handle context, unsigned int channels);
</code></pre>
<p>Creates a NoiseGenerator configured for uniform noise with the specified number of output channels.
The number of output channels cannot be configured at runtime.  Each channel produces decorrelated noise.</p>
<h2 id="properties-11"><a class="header" href="#properties-11">Properties</a></h2>
<table><thead><tr><th>Enum</th><th>Type</th><th>Default Value</th><th>Range</th><th>Description</th></tr></thead><tbody>
<tr><td>SYZ_P_NOISE_TYPE</td><td>int</td><td>SYZ_NOISE_TYPE_UNIFORM</td><td>any SYZ_NOISE_TYPE</td><td>The type of noise to generate. See remarks.</td></tr>
</tbody></table>
<h2 id="remarks-10"><a class="header" href="#remarks-10">Remarks</a></h2>
<p>NoiseGenerators generate noise, which will be useful in future when various effects are added.  For instance filtered noise makes plausible wind.
Note that noise generators don't support <code>SYZ_P_PITCH_BEND</code> because noise doesn't have a pitch by definition.</p>
<p>Synthizer allows setting the algorithm used to generate noise to one of the following options.  Note that these are more precisely named than white/pink/brown; the sections below document the equivalent in the more standard nomenclature.</p>
<h3 id="syz_noise_type_uniform"><a class="header" href="#syz_noise_type_uniform"><code>SYZ_NOISE_TYPE_UNIFORM</code></a></h3>
<p>A uniform noise source.  From an audio perspective this is white noise, but is sampled from a uniform rather than Gaussian distribution for efficiency.</p>
<h3 id="syz_noise_type_vm"><a class="header" href="#syz_noise_type_vm"><code>SYZ_NOISE_TYPE_VM</code></a></h3>
<p>This is pink noise generated with the Voss-McCartney algorithm, which consists of a number of summed uniform random number generators which are run at different rates.
Synthizer adds an additional random number generator at the top of the hierachy in order to improve the color of the noise in the high frequencies.</p>
<h3 id="syz_noise_type_filtered_brown"><a class="header" href="#syz_noise_type_filtered_brown"><code>SYZ_NOISE_TYPE_FILTERED_BROWN</code></a></h3>
<p>This is brown noise generated with a -6DB filter.</p>
<h1 id="globaleffect"><a class="header" href="#globaleffect">GlobalEffect</a></h1>
<p>This is the abstract base class for global effects.</p>
<h2 id="properties-12"><a class="header" href="#properties-12">Properties</a></h2>
<table><thead><tr><th>Enum</th><th>Type</th><th>Default</th><th>Range</th><th>Description</th></tr></thead><tbody>
<tr><td>SYZ_P_GAIN</td><td>double</td><td>1.0</td><td>value &gt;= 0.0</td><td>The overall gain of the effect.</td></tr>
</tbody></table>
<h2 id="functions-4"><a class="header" href="#functions-4">Functions</a></h2>
<h3 id="syz_effectreset"><a class="header" href="#syz_effectreset"><code>syz_effectReset</code></a></h3>
<pre><code>SYZ_CAPI syz_ErrorCode syz_effectReset(syz_Handle effect);
</code></pre>
<p>Clears the internal state of the effect. Intended for design/development purposes.  This function may produce clicks and other artifacts and is slow.</p>
<h2 id="remarks-11"><a class="header" href="#remarks-11">Remarks</a></h2>
<p>All global effects inherit from this object type.</p>
<h1 id="echo"><a class="header" href="#echo">Echo</a></h1>
<p>IMPORTANT: this object is provisional and may be subject to change.</p>
<h2 id="constructors-10"><a class="header" href="#constructors-10">Constructors</a></h2>
<h3 id="syz_createglobalecho"><a class="header" href="#syz_createglobalecho"><code>syz_createGlobalEcho</code></a></h3>
<pre><code>SYZ_CAPI syz_ErrorCode syz_createGlobalEcho(syz_Handle *out, syz_Handle context);
</code></pre>
<p>Creates the global variant of the echo effect.</p>
<h2 id="functions-5"><a class="header" href="#functions-5">Functions</a></h2>
<h3 id="syz_echosettaps"><a class="header" href="#syz_echosettaps"><code>syz_echoSetTaps</code></a></h3>
<pre><code>struct syz_EchoTapConfig {
	float delay;
	float gain_l;
	float gain_r;
};

SYZ_CAPI syz_ErrorCode syz_echoSetTaps(syz_Handle handle, unsigned int n_taps, struct syz_EchoTapConfig *taps);
</code></pre>
<p>Configure the taps for this Echo.  Currently, delay must be no greater than 5 seconds.  To clear the taps, set the echo
to an array of 0 elements.</p>
<h2 id="properties-13"><a class="header" href="#properties-13">Properties</a></h2>
<p>None</p>
<h2 id="remarks-12"><a class="header" href="#remarks-12">Remarks</a></h2>
<p>This is a stereo tapped delay line, with a one-block crossfade when taps are reconfigured.  The max delay is currently fixed at 5 seconds, but this will be made user configurable in future.</p>
<p>This implementation offers precise control over the placement of taps, at the cost of not being able to have indefinitely long echo effects.  It's most useful for modeling discrete, panned
echo taps.  Some ways this is useful are:</p>
<ul>
<li>Emphasize footsteps off walls in large spaces, by computing the parameters for the taps off level geometry.</li>
<li>Emphasize openings or cooridors.</li>
<li>Pair it with a reverb implementation to offer additional, highly controlled early reflection emphasis</li>
</ul>
<p>This is effectively discrete convolution for 2 channels, implemented using an algorithm designed for sparse taps.
In other words, the cost of any echo effect is <code>O(taps)</code>.  Anything up to a few thousand discrete taps is probably fine, but beyond that the cost will become prohibitive.</p>
<h1 id="fdnreverb"><a class="header" href="#fdnreverb">FdnReverb</a></h1>
<p>A reverb based off a feedback delay network.</p>
<p>Inherits from <a href="object_reference/./global_effect.html">GlobalEffect</a>.</p>
<p>This is provisional functionality, and subject to change.</p>
<h2 id="constructors-11"><a class="header" href="#constructors-11">Constructors</a></h2>
<h3 id="syz_createglobalfdnreverb"><a class="header" href="#syz_createglobalfdnreverb"><code>syz_createGlobalFdnReverb</code></a></h3>
<pre><code>SYZ_CAPI syz_ErrorCode syz_createGlobalFdnReverb(syz_Handle *out, syz_Handle context);
</code></pre>
<p>Creates a global FDN reverb with default settings.</p>
<h2 id="properties-14"><a class="header" href="#properties-14">Properties</a></h2>
<p>See remarks for a description of what these do and how to use them effectively.</p>
<table><thead><tr><th>Enum</th><th>Type</th><th>Default</th><th>Range</th><th>Description</th></tr></thead><tbody>
<tr><td>SYZ_P_MEAN_FREE_PATH</td><td>double</td><td>0.02</td><td>0.0 to 0.5</td><td>The mean free path of the simulated environment.</td></tr>
<tr><td>SYZ_P_T60</td><td>double</td><td>1.0</td><td>0.0 to 100.0</td><td>The T60 of the reverb</td></tr>
<tr><td>SYZ_P_LATE_REFLECTIONS_LF_ROLLOFF</td><td>double</td><td>1.0</td><td>0.0 to 2.0</td><td>A multiplicative factor on T60 for the low frequency band</td></tr>
<tr><td>SYZ_P_LATE_REFLECTIONS_LF_REFERENCE</td><td>double</td><td>200.0</td><td>0.0 to 22050.0</td><td>Where the low band of the feedback equalizer ends</td></tr>
<tr><td>SYZ_P_LATE_REFLECTIONS_HF_ROLLOFF</td><td>double</td><td>0.5</td><td>0.0 to 2.0</td><td>A multiplicative factor on T60 for the high frequency band</td></tr>
<tr><td>SYZ_P_LATE_REFLECTIONS_HF_REFERENCE</td><td>double</td><td>500.0</td><td>0.0 to 22050.0</td><td>Where the high band of the equalizer starts.</td></tr>
<tr><td>SYZ_P_LATE_REFLECTIONS_DIFFUSION</td><td>double</td><td>1.0</td><td>0.0 to 1.0</td><td>Controls the diffusion of the late reflections as a percent.</td></tr>
<tr><td>SYZ_P_LATE_REFLECTIONS_MODULATION_DEPTH</td><td>double</td><td>0.01</td><td>0.0 to 0.3</td><td>The depth of the modulation of the delay lines on the feedback path in seconds.</td></tr>
<tr><td>SYZ_P_LATE_REFLECTIONS_MODULATION_FREQUENCY</td><td>double</td><td>0.5</td><td>0.01 to 100.0</td><td>The frequency of the modulation of the delay lines inthe feedback paths.</td></tr>
<tr><td>SYZ_P_LATE_REFLECTIONS_DELAY</td><td>double</td><td>0.01</td><td>0.0 to 0.5</td><td>The delay of the late reflections relative to the input in seconds.</td></tr>
</tbody></table>
<h2 id="remarks-13"><a class="header" href="#remarks-13">Remarks</a></h2>
<p>This is a reverb composed of a feedback delay network with 8 internal delay lines.  The algorithm proceeds as follows:</p>
<ul>
<li>Audio is fed through the input filter, a lowpass.  Use this to eliminate high frequencies, which can be quite harsh when fed to reverb algorithms.
Currently, this filter is hardcoded, but Synthizer will be introducing a property type for filters in the near future.</li>
<li>Then, audio is fed into a series of 8 delay lines, connected with a feedback matrix.  It's essentially a set of parallel allpass filters with some additional feedbacks, but inspired by physics.
<ul>
<li>Each of these delay lines is modulated, to reduce periodicity.</li>
<li>On each feedback path, the audio is fed through an equalizer to precisely control the decay rate in 3 frequency bands.</li>
</ul>
</li>
<li>Two decorrelated channels are extracted. This will be increased to 4 when surround sound support is added.</li>
<li>Finally, the output is delayed by the late reflections delay.</li>
</ul>
<p>The current reverb modle is missing spatialized early reflections.  Practically speaking this makes very little difference when using an FDN because the FDN simulates them effectively on its own, but the
<code>SYZ_P_EARLY_REFLECTIONS_*</code> namespace is reserved for that purpose.  The plan is to feed them through HRTF in order to attempt to capture the shape of the room, possibly with a per-source model.</p>
<p>The reverb is also missing the ability to pan late reflections; this is on the roadmap.</p>
<p>The default configuration is something to the effect of a medium-sized room.  Presets will be added in future.  The following sections explain considerations for reverb design with this algorithm:</p>
<h3 id="a-note-on-property-changes"><a class="header" href="#a-note-on-property-changes">A Note On Property Changes</a></h3>
<p>The FdnReverb effect involves a large amount of feedback and is therefore impossible to crossfade efficiently. To that end,we don't try.  Expect most property changes save for t60 and the hf/lf frequency controls to cause clicking and other artifacts.</p>
<p>To change properties smoothly, it's best to create a reverb, set all the parameters, connect all the sources to the new one, and disconnect
all the sources from the old one, in that order.  Synthizer may eventually do this internally, but that necessitates taking a permanent and large allocation cost without a lot of implementation work being done first, so for the moment we don't.</p>
<p>In practice, this doesn't matter.  Most environments don't change reverb characteristics.  A good flow is as follows:</p>
<ul>
<li>Design the reverb in your level editor/other environment.</li>
<li>When necessary, use <code>syz_effectReset</code> for interactive experimentation.</li>
<li>When distributing/launching for real, use the above crossfading instructions.</li>
</ul>
<p>It is of course possible to use more than one reverb at a time as well, and to fade sources between them at different levels. Note, however, that reverbs are relatively expensive.</p>
<h3 id="the-input-filter"><a class="header" href="#the-input-filter">The Input Filter</a></h3>
<p>NOTE: the following currently isn't configurable, but the comments apply after whichever 0.8.x version introduces a filter property type.</p>
<p>Most reverb algorithms have a problem: high frequencies are emphasized.  Synthizer's is no different.  To solve this, we introduce an input lowpass filter, which can cut out the higher frequencies.</p>
<p>Changing this cutoff filter is the strongest tool available for coloring the reverb.  Low cutoffs are great for rooms with sound dampening, high cutoffs for concrete walls.
It can be disabled, but doing so will typically cause metallic and periodic artifacts to be noticeable.</p>
<h3 id="choosing-the-mean-free-path-and-late-reflections-delay"><a class="header" href="#choosing-the-mean-free-path-and-late-reflections-delay">Choosing the mean free path and late reflections delay</a></h3>
<p>These two values are most directly responsible for controlling how big a space feels.  Intuitively, the mean free path is the average distance from wall to wall, and the late reflections delay
is the time it takes for audio to hit something for the first time.  In general, get the mean free path by dividing the average distance between the walls by the speed of sound, and set the late reflections delay to something in the same order of magnitude.</p>
<p>A good approximation for the mean free path is <code>4 * volume / surface_area</code>.  Mathematically, it's the average time sound travels before reflection off an obstacle.  Very large mean free paths produce many discrete echoes.  For unrealistically large values, the late reflections won't
be able to converge at all.</p>
<h3 id="choosing-t60-and-controlling-per-band-decay"><a class="header" href="#choosing-t60-and-controlling-per-band-decay">Choosing T60 and controlling per-band decay</a></h3>
<p>The t60 and related properties control the gains and configuration of a filter on the feedback path.</p>
<p>The t60 of a reverb is defined as the time it takes for the reverb to decay by <code>-60db</code>.  Effectively this can be thought of as how long until the reverb is completely silent.
0.2 to 0.5 is a particularly reverberant and large living room, 1.0 to 2.0 is a concert hall, 5.0 is an amazingly large cavern, and values larger than that quickly become unrealistic and metallic.</p>
<p>Most environments don't have the same decay time for all frequency bands, so the FdnReverb actually uses a 3-band equalizer instead of raw gains on the feedback paths.  The bands are as follows:</p>
<ul>
<li>0.0 to <code>SYZ_P_LATE_REFLECTIONS_LF_REFERENCE</code></li>
<li><code>SYZ_P_LATE_REFLECTIONS_LF_REFERENCE</code> to <code>SYZ_P_LATE_REFLECTIONS_HF_REFERENCE</code></li>
<li><code>SYZ_P_LATE_REFLECTIONS_HF_REFERENCE</code> to nyquist</li>
</ul>
<p><code>SYZ_P_T60</code> controls the decay time of the middle frequency band.  The lower band is <code>t60 * lf_rolloff</code>, and the upper <code>t60 * hf_rolloff</code>.  This allows you to simply change T60, and let the rolloff ratios
control coloration.</p>
<p>Intuitively, rooms with carpet on all the walls have a rather low hf reference and rolloff, and giant stone caverns are close to equal in all frequency bands. The lf reference/rolloff pairing can be used primarily for
non-natural base boosting.  When the reverb starts, all frequencies are relatively equal but, as the audio continually gets fed back through the feedback paths,
the equalizer will emphasize or deemphasize the 3 frequency bands at different rates.  To use this effectively, treat the hf/lf as defining the materials of the wall, then move t60.</p>
<p>Note that the amount of coloration you can get from the equalizer is limited especially for short reverbs.  To control the perception of the environment more bluntly and independently of t60, use the input filter.</p>
<h3 id="diffusion"><a class="header" href="#diffusion">Diffusion</a></h3>
<p>The diffusion of the reverb is how fast the reverb tail transitions from discrete echoes to a continuous reverberant response.  Synthizer exposes this to you as a percent-based control, since it's not conveniently possible to tie
anything to a real physical quantity in this case.  Typically, diffusion at 1.0 (the default) is what you want.</p>
<p>Another way to think of diffusion is how rough the walls are, how many obstacles there are for sound to bounce off of, etc.</p>
<h3 id="delay-line-modulation"><a class="header" href="#delay-line-modulation">Delay Line modulation</a></h3>
<p>A problem with feedback delay networks and/or other allpass/comb filter reverb designs is that they tend to be obviously periodic.  To deal with this, modulation of the delay
lines on the feedback path is often introduced.  The final stage of designing an FdnReverb is to decide on the values of the modulation depth and frequency.</p>
<p>The trade-off here is this:</p>
<ul>
<li>At low modulation depth/frequency, the reverb likes to sound metallic.</li>
<li>At high modulation depth/frequency, the reverb gains very obvious nonlinear effects.</li>
<li>At very high modulation depth/frequency, the reverb doesn't sound like a reverb at all.</li>
</ul>
<p>FdnReverb tries to default to universally applicable settings, but it might still be worth adjusting these. To disable modulation all together, set the depth to 0.0; due to internal details, setting the frequency to 0.0 is not possible.</p>
<p>The artifacts introduced by large modulation depth/frequency values are least noticeable with percussive sounds and most noticeable with constant tones such as pianos and vocals.  Inversely, the periodic artifacts of no or little modulation
are most noticeable with percussive sounds and least  noticeable with constant tones.</p>
<p>In general, the best way to not need to touch these settings is to use realistic t60, as the beginning of the reverb isn't generally periodic.</p>
<h1 id="synthizer-08x"><a class="header" href="#synthizer-08x">Synthizer 0.8.x</a></h1>
<h2 id="highlights-of-this-release"><a class="header" href="#highlights-of-this-release">Highlights of this Release</a></h2>
<p>This release is about performance, and undoing the Linux rollback in 0.7.7.  As of this release,
all code paths from the external interface don't block on the audio thread in the best case.  An internal refactor and introduction
of a new command architecture unify a bunch of ad-hoc interfaces for fast inter-thread synchronization.</p>
<p>Specifically:</p>
<ul>
<li>Property reads are now a couple of atomic operations as opposed to a semaphore and waiting on the next audio tick.
Put another way, they're literally millions of times faster, and it's now possible to read things like <code>BufferGenerator.position</code> without issue.</li>
<li>property writes are now roughly 5 times faster than they used to be</li>
<li>object creation is essentially free</li>
<li>adding and removing generators from sources doesn't block</li>
<li>configuring routes for effects doesn't block</li>
</ul>
<p>There is one exception to the lack of blocking: if code does around 10000 operations per audio tick,
Synthizer will have no choice but to block due to internal resource exhaustion. If this proves to be an issue in practice, it is trivial to raise this limit further.</p>
<h2 id="a-note-on-breakage"><a class="header" href="#a-note-on-breakage">A Note on Breakage</a></h2>
<p>The above changes were a complex refactor.  In order to make them with as little chaos as possible Synthizer has begun introducing some basic unit tests, but nonetheless it is nearly impossible
to make a release like this one without issues.  You are encouraged to report issues against <a href="https://github.com/synthizer/synthizer/issues">Synthizer's GitHub repository</a>.</p>
<h2 id="compatibility"><a class="header" href="#compatibility">Compatibility</a></h2>
<p>Synthizer introduces the following compatibility breakages in this release:</p>
<p>In order to get the above performance increases, it was necessary to remove the ability to read object properties.  This has the side effect of hiding details
of object lifetime, which Synthizer may rely on in future.</p>
<p><code>FdnReverb.input_filter_enabled</code> and <code>FdnReverb.input_filter_cutoff</code> were removed.  Synthizer will be replacing
these with a  dedicated filter property type in the near future and opted to remove them now as to avoid an excessive number of releases that introduce backward-incompatible changes.</p>
<p>Property reads are now actually eventually consistent.  The manual preivously stated that it's possible for a read that comes after a write
to read a stale value, so code shouldn't have been relying on it.  In any case, Synthizer now uses this reservation for the above performance increases, and may break code
that incorrectly relied on the old behavior.</p>
<p>Synthizer has also changed the default panner strategy to <code>SYZ_PANNER_STRATEGY_STEREO</code>.  To re-enable HRTF, set this on a per-source basis.  The ability to set this default on a per-context basis will be introduced in the 0.8.x
series.  This change was made because HRTF is only useful for headphone users, and it is not possible
for Synthizer to reliably detect that case.  In general, stereo panning is safe on every
audio configuration including surround sound systems.</p>
<h2 id="patch-notes"><a class="header" href="#patch-notes">Patch Notes</a></h2>
<h3 id="080"><a class="header" href="#080">0.8.0</a></h3>
<ul>
<li>Initial release</li>
<li>Undo the rollbacks in 0.7.7 and reintroduce MSVC and Linux support.</li>
<li>Internal fix for wire filters, which now don't play silence.</li>
<li>A number of small fixes and slight quality improvements to reverb.</li>
<li>All of the massive performance increases from above.</li>
</ul>
<h2 id="081"><a class="header" href="#081">0.8.1</a></h2>
<ul>
<li>Miniaudio was improperly configured to use a conservative profile, rather than a low latency profile.
Caused extreme audio latency.</li>
</ul>
<h2 id="083"><a class="header" href="#083">0.8.3</a></h2>
<ul>
<li>Fix: FdnReverb.t60 = 0.0 no longer internally divides by 0.</li>
<li>fix: BufferGenerator again uses seconds for positions.  This was refactored incorrectly during 0.8.0's major changes.</li>
<li>Objects should now die faster when their handles are freed, due to holding
only weak references internally where possible when dispatching commands to the audio thread.</li>
</ul>
<h2 id="084"><a class="header" href="#084">0.8.4</a></h2>
<ul>
<li>Contexts and all generators now support <code>SYZ_P_GAIN</code>.</li>
<li>Contexts, sources, and generators now support play/pause via <code>syz_pause</code> and <code>syz_play</code>.
<ul>
<li>In Python, this is <code>src.pause()</code> and similar.</li>
</ul>
</li>
<li>As the first part of the event system, all Synthizer objects may now have arbitrary userdata associated with them:
<ul>
<li>In C, this is <code>syz_getUserdata</code> and <code>syz_setUserdata</code></li>
<li>In Python, this is <code>get_userdata</code> and <code>set_userdata</code></li>
<li>This will be documented properly when the rest of the event system exists, but can be used to link Synthizer
objects to non-Synthizer objects without having to maintain a custom mapping yourself.</li>
</ul>
</li>
<li>Slight memory savings.</li>
<li>Fix: deleting contexts no longer crashes.</li>
</ul>
<h2 id="085"><a class="header" href="#085">0.8.5</a></h2>
<ul>
<li>New function <code>syz_getObjectType</code> which queries the object type. Primarily
intended for bindings developers.</li>
<li>Fix: Synthizer no longer leaks megabytes of memory per second (issue #44).</li>
</ul>
<h2 id="086"><a class="header" href="#086">0.8.6</a></h2>
<p>This release contains somewhat experimental code to make decoding buffers faster by approximately 2X.  Please report any perceptible audio quality issues with <code>BufferGenerator</code>.</p>
<ul>
<li><code>syz_handleFree</code> now no-ops when passed <code>handle = 0</code>.</li>
<li>Fix: deleting sources in specific orders no longer causes audio artifacts (issue #46)</li>
</ul>
<h2 id="087"><a class="header" href="#087">0.8.7</a></h2>
<ul>
<li>Fix: the library no longer crashes due to internal races between handle deletion and execution of audio commands on the background thread
<ul>
<li>This fixes a number of crashes, most notably issue #50, which highlighted the issue due to effects relying heavily on commands.</li>
</ul>
</li>
<li>Fix: streaming generators no longer spuriously seek to the beginning of their audio after generating the first few MS of audio (issue #49)</li>
<li>Fix: <code>panning_scalar</code> will once more properly take effect if set immediately after <code>PannedSource</code> creation (issue #52)</li>
</ul>
<h2 id="088"><a class="header" href="#088">0.8.8</a></h2>
<ul>
<li>An <a href="releases/../tutorials/events.html">event system</a>.  This is alpha, and changes are expected in 0.9.</li>
<li>Add <code>SYZ_P_PANNER_STRATEGY</code> to Context to default panner strategies for new sources.</li>
</ul>
<h2 id="089"><a class="header" href="#089">0.8.9</a></h2>
<ul>
<li>Fix: non-looping BufferGenerator with a pitch bend is no longer silent</li>
<li>Fix/improvement: In Python, Synthizer events inherit from a common base class.</li>
</ul>
<h2 id="0810"><a class="header" href="#0810">0.8.10</a></h2>
<p>This release is the long-awaited improved HRTF.  This might not be the final version, but it's much
better in quality and the scripts to generate it are now much easier to maintain.  Please leave any feedback
<a href="https://github.com/synthizer/synthizer/issues/27">here</a>.  in particular, it is not feasible to test the entire sphere,
so it may be possible to find azimuth/elevation combinations which do weird things.</p>
<h2 id="0811-0816"><a class="header" href="#0811-0816">0.8.11-0.8.16</a></h2>
<p>These releases are a test series for moving CI to GitHub Actions. Though not user-facing, 0.8.14 now blocks on successful Linux
CI for Ubuntu 20 and thus gives Linux support which is on par with Windows.</p>
<h1 id="release-notes-for-00x-to-08x"><a class="header" href="#release-notes-for-00x-to-08x">Release Notes for 0.0.x to 0.8.x</a></h1>
<p>Starting at 0.8 and later, Synthizer maintains separate pages for every incompatible release with more details on compatibility breakage and what specifically changed. The following were early development versions,
and should no longer be used.</p>
<h2 id="077"><a class="header" href="#077">0.7.7</a></h2>
<ul>
<li>Identical to 0.7.5.  0.7.6 introduced a major performance regression that makes Synthizer unusable (probably issue #32, but investigations are ongoing).
After this is fixed, the next version will contain all the nice 0.7.6 things.</li>
</ul>
<h2 id="076"><a class="header" href="#076">0.7.6</a></h2>
<ul>
<li>Synthizer now builds on Linux.  This is preliminary.  If you experience issues, please report them, as Linux isn't my primary platform.  That said, I have received multiple confirmations that it works.</li>
<li>Python now publishes source distributions, which are capable of building without any extra intervention on your part, except for Windows which requires being in an appropriate MSVC shell.  On Linux, you can install Synthizer into virtualenvs with a simple <code>pip install synthizer</code>, assuming a supported C and C++ compiler.
<ul>
<li>Note that git is currently required in order to clone the Synthizer repository. We might include Synthizer inline in future.</li>
</ul>
</li>
<li>Prebuilt C artifacts for Windows now link against the multithreaded dynamic CRT. This was done to speed up Python builds and because there is
no obvious right choice. If you need a different configuration, please build from source specifying <code>CMAKE_MSVC_RUNTIME_LIBRARY</code> and <code>SYNTHIZER_LIB_TYPE</code> to appropriate values.</li>
<li>The audio generation all runs inline in the audio callback. This has the knock-on effect of making.
property reads even slower than they were already, but is necessary to work well on Linux. See issue #32 for tracking fast property reads.</li>
</ul>
<h2 id="075"><a class="header" href="#075">0.7.5</a></h2>
<ul>
<li>Introduce <a href="releases/../object_reference/fdn_reverb.html">reverb</a>.</li>
<li>Start building Python 3.9 wheels.</li>
<li>Sources now fade gain changes to prevent clicks, especially when feeding effects.</li>
<li>Expose <code>syz_resetEffect</code> for interactive experimentation purposes, to clear the internal state of effects. In python this is <code>.reset()</code> on any effect.</li>
<li>All effects now have a <code>SYZ_P_GAIN</code> property to set the overall gain of the effect.</li>
<li>internally fix the bitsets, which manifested as weird issues with allocating sources to panner lanes, for example
issue #16 where PannedSource could become silent.  Note that this may introduce other issues in exchange: it was assumed
that the bitsets were working this entire time.</li>
</ul>
<h2 id="074"><a class="header" href="#074">0.7.4</a></h2>
<ul>
<li>Document our <a href="releases/../concepts/stability.html">versioning and stability guarantees</a>.</li>
<li>Introduce <a href="releases/../concepts/effects.html">effect routing support</a>.</li>
<li>Introduce an <a href="releases/../object_reference/echo.html">Echo</a> effect.</li>
</ul>
<h2 id="073"><a class="header" href="#073">0.7.3</a></h2>
<ul>
<li>Fix pitch bend support on BufferGenerator when looping is enabled.
For the morbidly curious there is indeed a difference between <code>std::fmod</code> and <code>std::remainder</code></li>
<li>Maybe fix bugs in stereo panning for the same reason.
If you had issues with stereo panning and didn't report them, you should probably try this release.</li>
</ul>
<h2 id="072"><a class="header" href="#072">0.7.2</a></h2>
<ul>
<li>New property on BufferGenerator: <code>SYZ_P_PITCH_BEND</code>.</li>
<li>We will adopt pre-1.0 semantic versioning going forward in order to be compatible with Rust-style <code>^</code> dependencies:
<code>0.major.minor</code>, with minor incrementing for features and major incrementing for incompatible API updates. This should enable at least some compatibility in version numbers across package managers.</li>
</ul>
<h2 id="071"><a class="header" href="#071">0.7.1</a></h2>
<ul>
<li>Attempt releasing 32-bit Python wheels.</li>
</ul>
<h2 id="070"><a class="header" href="#070">0.7.0</a></h2>
<ul>
<li>Add a noise generator.</li>
<li>Internal fixes to filters.</li>
</ul>
<h2 id="064"><a class="header" href="#064">0.6.4</a></h2>
<ul>
<li>Python bindings now release the GIL in from_stream.</li>
</ul>
<h2 id="063"><a class="header" href="#063">0.6.3</a></h2>
<ul>
<li>Re-enable dr_flac SIMD.</li>
<li>Fix a bug with resampling when decoding to buffers.</li>
</ul>
<h2 id="061"><a class="header" href="#061">0.6.1</a></h2>
<p>This release temporarily disables dr_flac SIMD support until resolution of <a href="https://github.com/mackron/dr_libs/issues/143">this upstream issue</a>.</p>
<h2 id="060"><a class="header" href="#060">0.6.0</a></h2>
<h3 id="features"><a class="header" href="#features">Features</a></h3>
<ul>
<li>Major improvements to StreamingGenerator:
<ul>
<li>Position and looping are now exposed.</li>
<li>Streaming now happens in a background thread.</li>
<li>Streaming now builds up a buffer which prevents underruns.</li>
<li>Note that this uses a bunch of as-yet-untested threading/concurrency stuff that hasn't been exercised heavily, so if you notice bugs
please open issues.</li>
</ul>
</li>
<li>Introduce a stereo panning strategy. Note that this will become the default panning strategy 
in the future, because it's the only one that's safe on all speaker arrangements.
If you want HRTF, request it by setting <code>SYZ_P_PANNER_STRATEGY</code> on the context and/or sources.</li>
</ul>
<h3 id="bugs-fixed"><a class="header" href="#bugs-fixed">Bugs Fixed</a></h3>
<ul>
<li>Throw an exception instead of silently crashing on invalid audio files.</li>
<li>Fix the fundamentally broken DirectSource mixing logic. This probably still needs some improvement but is no longer fundamentally broken.</li>
<li>Fix Stream seeking when using LookaheadByteStream internally. This fixes/allows for StreamingGenerator to seek,
and may also fix  loading of audio files into buffers in some cases.</li>
</ul>
<h2 id="050"><a class="header" href="#050">0.5.0</a></h2>
<ul>
<li>Roll out a deferred freeing strategy, which uses C++ custom allocators to
move freeing pointers to a background thread that wakes up on a period. This doesn't move all freeing, but gets a vast
majority of it. The impact is that it will take a little while for any large memory allocations to actually free,
but that freeing will (mostly) not happen on any thread but the freeing thread, including
threads from users of the public API.  This is the first step to eventually decreasing
latency below 20MS or so, though the upshot of that work won't be seen for a while.</li>
<li>Decouple Buffer from context. The manual already claimed that we did, but the library itself didn't. Calls to create buffers
no longer needa context passed in.</li>
<li>Gains are now scalars instead of DB. This is because it is valuable to be able to know which combinations of gains sum to 1 in order to prevent clipping.
<ul>
<li>For reference, you can get a scalar gain from DB as <code>10**(db / 20)</code> if you need it.</li>
</ul>
</li>
<li>Fix creating buffers of files which require resampling.</li>
</ul>
<h2 id="041"><a class="header" href="#041">0.4.1</a></h2>
<ul>
<li>Fixes to allocating multiple panner lanes from a PannerBank.
<ul>
<li>Manifested as the inability to play multiple sources.</li>
</ul>
</li>
<li>Fix HRTF computation for angles outside the built-in HRTF dataset, but which are still in range for elevation.</li>
</ul>
<h2 id="040"><a class="header" href="#040">0.4.0</a></h2>
<ul>
<li>Introduce DirectSource, for music and other non-panned assets.</li>
<li>All sources now have gain, as part of refactoring for DirectSource.</li>
<li>Introduce <code>syz_bufferGetChannels</code>, <code>syz_bufferGetLengthInSamples</code>, and <code>syz_bufferGetLengthInSeconds</code>, and obvious Python equivalents.</li>
<li>Source add/remove generators needed to happen in the audio thread in order to not break. For now this is using <code>Context.call</code>, but in future
it'll probably use a ConcurrentQueue to enqueue updates and avoid the overhead, or perhaps an abstracted PropertyRing.</li>
<li>Move to <a href="https://github.com/cameron314/concurrentqueue">moodycamel::ConcurrentQueue</a>. This removes mutexes in a lot of places
<ul>
<li>As part of this, get rid of our custom lockfree queues. ConcurrentQueue is better; it's MPMC and not intrusive.</li>
</ul>
</li>
<li>Get rid of some dead code.</li>
<li>Fix double properties that use P_DOUBLE_MIN to mean minimum double, not 0. This bug brought to you by surprising C++ numeric_limits behavior.</li>
<li>Fix looping in <code>BufferGenerator</code>.</li>
<li>Offer additional guarantees around <code>syz_getX</code> behavior with respect to properties that Synthizer modifies, like generator positions.</li>
<li>CONTRIBUTING.md and pull request templates.</li>
</ul>
<h2 id="030"><a class="header" href="#030">0.3.0</a></h2>
<ul>
<li>Added support for Flac and MP3 via <a href="https://github.com/mackron/dr_libs">dr_libs</a>.</li>
<li>Extended byte streams to be able to advertise their size.</li>
</ul>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                        

                        

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                

                
            </nav>

        </div>

        

        

        

        
        <script type="text/javascript">
            window.playground_copyable = true;
        </script>
        

        

        
        <script src="elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="searcher.js" type="text/javascript" charset="utf-8"></script>
        

        <script src="clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
        

        
        
        <script type="text/javascript">
        window.addEventListener('load', function() {
            window.setTimeout(window.print, 100);
        });
        </script>
        
        

    </body>
</html>
