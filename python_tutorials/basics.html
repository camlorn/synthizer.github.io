<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>A Basic Media Player - The Synthizer Manual</title>
        
        


        <!-- Custom HTML head -->
        


        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        
        <link rel="icon" href="../favicon.svg">
        
        
        <link rel="shortcut icon" href="../favicon.png">
        
        <link rel="stylesheet" href="../css/variables.css">
        <link rel="stylesheet" href="../css/general.css">
        <link rel="stylesheet" href="../css/chrome.css">
        
        <link rel="stylesheet" href="../css/print.css" media="print">
        

        <!-- Fonts -->
        <link rel="stylesheet" href="../FontAwesome/css/font-awesome.css">
        
        <link rel="stylesheet" href="../fonts/fonts.css">
        

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../highlight.css">
        <link rel="stylesheet" href="../tomorrow-night.css">
        <link rel="stylesheet" href="../ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        

        
    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded "><a href="../introduction.html"><strong aria-hidden="true">1.</strong> Introduction</a></li><li class="chapter-item expanded affix "><li class="part-title">Python Tutorials</li><li class="chapter-item expanded "><a href="../python_tutorials/introduction.html"><strong aria-hidden="true">2.</strong> Introduction</a></li><li class="chapter-item expanded "><a href="../python_tutorials/installation.html"><strong aria-hidden="true">3.</strong> Installation</a></li><li class="chapter-item expanded "><a href="../python_tutorials/basics.html" class="active"><strong aria-hidden="true">4.</strong> A Basic Media Player</a></li><li class="chapter-item expanded "><a href="../python_tutorials/linger.html"><strong aria-hidden="true">5.</strong> Configuring Linger</a></li><li class="chapter-item expanded "><a href="../python_tutorials/events.html"><strong aria-hidden="true">6.</strong> Events</a></li><li class="chapter-item expanded "><a href="../python_tutorials/filters.html"><strong aria-hidden="true">7.</strong> Filters</a></li><li class="chapter-item expanded affix "><li class="part-title">Concepts</li><li class="chapter-item expanded "><a href="../concepts/c_api.html"><strong aria-hidden="true">8.</strong> Introduction to the C API</a></li><li class="chapter-item expanded "><a href="../concepts/initialization.html"><strong aria-hidden="true">9.</strong> Logging, Initialization, and Shutdown</a></li><li class="chapter-item expanded "><a href="../concepts/handles.html"><strong aria-hidden="true">10.</strong> Handles and userdata</a></li><li class="chapter-item expanded "><a href="../concepts/audio_in.html"><strong aria-hidden="true">11.</strong> Basics of Audio In Synthizer</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../concepts/context.html"><strong aria-hidden="true">11.1.</strong> The Context</a></li><li class="chapter-item expanded "><a href="../concepts/generators.html"><strong aria-hidden="true">11.2.</strong> Introduction to Generators</a></li><li class="chapter-item expanded "><a href="../concepts/sources.html"><strong aria-hidden="true">11.3.</strong> Introduction to Sources</a></li><li class="chapter-item expanded "><a href="../concepts/properties.html"><strong aria-hidden="true">11.4.</strong> Controlling Object Properties</a></li><li class="chapter-item expanded "><a href="../concepts/gain.html"><strong aria-hidden="true">11.5.</strong> Setting Gain/volume</a></li><li class="chapter-item expanded "><a href="../concepts/pausing.html"><strong aria-hidden="true">11.6.</strong> Pausing and Resuming Playback</a></li><li class="chapter-item expanded "><a href="../concepts/lingering.html"><strong aria-hidden="true">11.7.</strong> Configuring Objects to Continue Playing Until Silent</a></li><li class="chapter-item expanded "><a href="../concepts/decoding.html"><strong aria-hidden="true">11.8.</strong> Streams and Decoding Audio Data</a></li><li class="chapter-item expanded "><a href="../concepts/libsndfile.html"><strong aria-hidden="true">11.9.</strong> Loading Libsndfile</a></li><li class="chapter-item expanded "><a href="../concepts/custom_streams.html"><strong aria-hidden="true">11.10.</strong> Implementing Custom Streams and Custom Stream Protocols</a></li><li class="chapter-item expanded "><a href="../concepts/channel_mixing.html"><strong aria-hidden="true">11.11.</strong> Channel Upmixing and Downmixing </a></li></ol></li><li class="chapter-item expanded "><a href="../concepts/3d_audio.html"><strong aria-hidden="true">12.</strong> 3D Audio, Panning, and HRTF</a></li><li class="chapter-item expanded "><a href="../concepts/filters_and_effects.html"><strong aria-hidden="true">13.</strong> Filters and Effects</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../concepts/filters.html"><strong aria-hidden="true">13.1.</strong> Filters</a></li><li class="chapter-item expanded "><a href="../concepts/effects.html"><strong aria-hidden="true">13.2.</strong> Effects and Effect Routing</a></li></ol></li><li class="chapter-item expanded "><a href="../concepts/events.html"><strong aria-hidden="true">14.</strong> Events</a></li><li class="chapter-item expanded "><a href="../concepts/stability.html"><strong aria-hidden="true">15.</strong> Stability Guarantees</a></li><li class="chapter-item expanded affix "><li class="part-title">The Object Reference</li><li class="chapter-item expanded "><a href="../object_reference/context.html"><strong aria-hidden="true">16.</strong> Context</a></li><li class="chapter-item expanded "><a href="../object_reference/buffer.html"><strong aria-hidden="true">17.</strong> Buffer</a></li><li class="spacer"></li><li class="chapter-item expanded "><a href="../object_reference/source.html"><strong aria-hidden="true">18.</strong> Operations Common to All Sources</a></li><li class="chapter-item expanded "><a href="../object_reference/direct_source.html"><strong aria-hidden="true">19.</strong> DirectSource</a></li><li class="chapter-item expanded "><a href="../object_reference/spatialized_source.html"><strong aria-hidden="true">20.</strong> Operations Common to Panned and 3D Sources</a></li><li class="chapter-item expanded "><a href="../object_reference/panned_source.html"><strong aria-hidden="true">21.</strong> PannedSource</a></li><li class="chapter-item expanded "><a href="../object_reference/source_3d.html"><strong aria-hidden="true">22.</strong> Source3D</a></li><li class="spacer"></li><li class="chapter-item expanded "><a href="../object_reference/generator.html"><strong aria-hidden="true">23.</strong> Operations Common to All Generators</a></li><li class="chapter-item expanded "><a href="../object_reference/streaming_generator.html"><strong aria-hidden="true">24.</strong> StreamingGenerator</a></li><li class="chapter-item expanded "><a href="../object_reference/buffer_generator.html"><strong aria-hidden="true">25.</strong> BufferGenerator</a></li><li class="chapter-item expanded "><a href="../object_reference/noise_generator.html"><strong aria-hidden="true">26.</strong> NoiseGenerator</a></li><li class="spacer"></li><li class="chapter-item expanded "><a href="../object_reference/global_effect.html"><strong aria-hidden="true">27.</strong> Operations Common to All Effects</a></li><li class="chapter-item expanded "><a href="../object_reference/global_echo.html"><strong aria-hidden="true">28.</strong> GlobalEcho</a></li><li class="chapter-item expanded "><a href="../object_reference/global_fdn_reverb.html"><strong aria-hidden="true">29.</strong> GlobalFdnReverb</a></li><li class="chapter-item expanded affix "><li class="part-title">Appendecies</li><li class="chapter-item expanded "><a href="../appendices/audio_eq_cookbook.html"><strong aria-hidden="true">30.</strong> Audio EQ Cookbook</a></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                        
                    </div>

                    <h1 class="menu-title">The Synthizer Manual</h1>

                    <div class="right-buttons">
                        
                        <a href="../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        
                        
                    </div>
                </div>

                
                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" name="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>
                

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="a-basic-media-player"><a class="header" href="#a-basic-media-player">A Basic Media Player</a></h1>
<h2 id="introduction"><a class="header" href="#introduction">Introduction</a></h2>
<p>This tutorial demonstrates the basics of Synthizer by explaining all of the
information necessary to build a basic 3D media player with HRTF enabled.</p>
<h2 id="initializing-synthizer"><a class="header" href="#initializing-synthizer">Initializing Synthizer</a></h2>
<p>Synthizer requires initialization and deinitialization. The best way to
initialize Synthizer is to use the context manager:</p>
<pre><code class="language-python">with synthizer.initialized():
    # Code...
</code></pre>
<p>The context manager will handle deinitialization on exceptions.  Though
<code>synthizer.initialize()</code> and <code>synthizer.shutdown()</code> are exposed, use is
discouraged as the context manager ensures clean shutdown in (almost) all cases.</p>
<p>Once the library is deinitialized, calls into Synthizer error.</p>
<p>the context manager forwards all arguments to <code>synthizer.initialize</code>, so e.g.
you can <a href="../concepts/libsndfile.html">load libsndfile</a> by passing
<code>libsndfile_path</code>.</p>
<h2 id="destroying-objects"><a class="header" href="#destroying-objects">Destroying Objects</a></h2>
<p>Unlike the rest of Python, Synthizer objects represent concrete audio
architecture, which need to have a defined lifetime in order to control when
they are and aren't being heard, and also to ensure that it can be well
understood when things are and aren't using system resources.  To that end,
Synthizer objects don't interact with Python garbage collection. When you're
done with an object, call <code>myobj.dec_ref()</code>.</p>
<p>At the moment, failing to do so will permanently leak the object.  Work in
future may lift this restriction, but it's still necessary to be explicit: if
you aren't, things may be audioble longer than you intend.</p>
<p>Be careful here.  If you leak objects, you will eventually run out of memory. If
you intentionally leak objects and the Python bindings start garbage collecting
them, your program will stop working.</p>
<h2 id="the-context"><a class="header" href="#the-context">The Context</a></h2>
<p>Most objects in Synthizer require a context, which represents a listener in 3D
space, an audio output device, and other miscellaneous infrastructure. Objects
are passed a context on construction, and two objects from different contexts
never interact.</p>
<p>To get a context:</p>
<pre><code class="language-python">ctx = synthizer.Context()
</code></pre>
<p>Currently, selecting audio output devices isn't supported, and audio will go to
the system default.</p>
<h2 id="buffers-streams-and-generators"><a class="header" href="#buffers-streams-and-generators">Buffers, Streams, and Generators</a></h2>
<p>The Synthizer audio graph is as follows:</p>
<ul>
<li>A source is fed by one or more generators and pans audio.</li>
<li>All the sources feed the context's output.</li>
</ul>
<p>Generators are an abstract concept, which represents somewhere audio comes from.
Specific kinds of generators implement the abstract interface in a concrete
fashion, notably <code>BufferGenerator</code> (takes a buffer) and <code>StreamingGenerator</code>
(takes streaming parameters).</p>
<p>The easiest way to get audio into Synthizer is via <code>from_file</code> on various
objects.  Buffers additionally offer a <code>from_encoded_data</code> for passing in-memory
encoded assets, and a <code>from_float_array</code> for passing in float audio data
directly.  It is also possible to access the <code>StreamHandle</code> class and use the
protocol/path pairs as discussed in the <a href="../concepts/decoding.html">section on
decoding</a> and to <a href="../concepts/custom_streams.html">implement custom
streams</a>, though tutorials do not exist for these
advanced concepts and you are encouraged to read the examples in <a href="https://github.com/synthizer/synthizer">Synthizer's
repository</a> or the Python binding's
source code to learn how they work.</p>
<p>To play back a stream, you have two choices: <code>StreamingGenerator</code> and
<code>BufferGenerator</code>.</p>
<p><code>Buffer</code>s are in-memory decoded assets, essentially arrays of 16-bit samples
resampled to Synthizer's samplerate. Note that they aren't actually contiguous
arrays, which means that users can't simply copy memory to retrieve the data.
They're also immutable: if you want them to contain different data, you have to
make a new one.  They can be connected to a <code>BufferGenerator</code> in order to
efficiently play back audio.  This is the lowest latency and most efficient way
to play audio.</p>
<p>By contrast, <code>StreamingGenerator</code> is for cases in which it is necessary or
desirable to decode audio in a streaming fashion.  This is useful for music, as
a concrete example.  It comes at the cost of higher audio latency.  For details
on this latency, see <a href="../object_reference/streaming_generator.html">the
reference</a>.</p>
<p>To get a streaming generator:</p>
<pre><code class="language-python">generator = synthizer.StreamingGenerator.from_file(ctx, &quot;test.wav&quot;)
</code></pre>
<p>To get a <code>Buffer</code> from a file and connect it to a <code>BufferGenerator</code>:</p>
<pre><code class="language-python">buffer = synthizer.Buffer.from_file(&quot;test.wav&quot;)
generator = synthizer.BufferGenerator(ctx)
generator.buffer = buffer
</code></pre>
<p>Note the following:</p>
<ul>
<li>Buffers aren't associated with a context and can be used anywhere,.</li>
<li>Buffers can be used simultaneously by multiple generators (or whatever else).
You are encouraged to cache them and reuse them indefinitely.</li>
<li>When Synthizer needs to overload a constructor, it does so as staticmethods on
the class, and makes it impossible to initialize the class directly.</li>
</ul>
<h2 id="sources"><a class="header" href="#sources">Sources</a></h2>
<p>Sources represent audio output.  They get one or more generators, combine them
all, and output.  Currently we have the following kinds of sources:</p>
<ul>
<li>A <code>DirectSource</code> conneccts audio directly to the speakers, so that you can
pass things through without collapsing them to mono.  This is what you want
for music.</li>
<li>A <code>PannedSource</code> is manually controlled using azimuth and elevation or,
alternatively, a panning scalar where -1 is all left and 1 is all right.</li>
<li><code>Source3D</code> is a 3D environmental source with the usual things you'd expect:
distance model, position, etc.</li>
</ul>
<h2 id="properties"><a class="header" href="#properties">Properties</a></h2>
<p>Synthizer objects are controlled primarily through properties, which are like
knobs on a hardware controller or sliders in a DAW.  They map to Python
properties as properties, e.g. to set one use <code>obj.property = value</code>.
Synthizer's C API represents these as <code>SYZ_P_PROPERTY_NAME</code> constants, which
become <code>property_name</code> in Python.</p>
<p>Synthizer offers the following kinds of properties:</p>
<ul>
<li>int, represented as either a Python integer type or an enum. An example of the
latter case is <code>source.distance_model</code>, which is a <code>synthizer.DistanceModel</code>.
Synthizer exposes enums as Python 3.4-style enums.</li>
<li>Double, which is self-explanatory.</li>
<li>Double3, which is a tuple of 3 doubles. Usually used as a position.</li>
<li>Double6, a tuple of 6 doubles. Usually used as an orientation (given a
dedicated section below).</li>
<li>Object, i.e. <code>buffer_generator.buffer = b</code>.</li>
<li>Biquad, which represents a filter.  See <a href="./filters.html">the dedicated
tutorial</a>.</li>
</ul>
<p>It is important to note that Synthizer properties are eventually consistent.
What this means is that code like the following doesn't do what you expect:</p>
<pre><code class="language-python">myobj.property = 0
myobj.property += 5
# May leave the property set at 5 forever.
myobj.property += 5
# May or may not fail, depending on timing.
assert myobj.property == 10

myobj.property = 15
x = myobj.property
# may or may not fail depending on timing.
assert x == 15
</code></pre>
<p>Property reads are primarily useful for properties like <code>playback_position</code> on
various generators, where Synthizer is updating the property itself. In general,
it's best to use properties to tell Synthizer what to do, but keep the model of
what's supposed to be going on in your code. A common mistake is to try to use
Synthizer to store data, for example putting the position of your objects in a
source rather than maintaing the coordinates yourself.  For some very simple
rules that will ensure you avoid these bugs:</p>
<ul>
<li>Always set properties with <code>=</code>.</li>
<li>Never read them unless it's something Synthizer also controls, like
<code>playback_position</code>.</li>
</ul>
<p>Object properties are internally referenced in a weak fashion. That is to say
that destroying (<code>.dec_ref()</code>)the object the property is set to will clear the
property.  If this is a <code>Buffer</code> on a <code>BufferGenerator</code>, the generator will
become silent unless a new buffer is assigned.</p>
<h2 id="an-aside-orientation-formulas"><a class="header" href="#an-aside-orientation-formulas">An aside: orientation formulas</a></h2>
<p>Before going much further, most people seem to eventually ask about trigonometry
with respect to using a 3D audio library for 2D games. The high level overview
for those who already know trigonometry is that Synthizer's coordinate system is
right-handed and orientations consist of 2 orthogonal unit vectors <code>(atx, aty, atz, upx, upy, upz)</code> stored as a packed property so that they can both be set
atomically.  But the longer version for those who don't know trigonometry is:</p>
<p>Degrees to radians is:</p>
<pre><code class="language-python">import math

def deg2rad(angle):
    return (angle / 180.0) * math.pi
</code></pre>
<p>People who don't know trig usually ask for orientations that are clockwise of
north. To do that:</p>
<pre><code class="language-python">import math

def make_orientation(degrees):
    rad = deg2rad(angle)
    return (math.sin(rad), math.cos(rad), 0, 0, 0, 1)
</code></pre>
<p>Setting <code>context.orientation</code> to the result of the above will set things up so
that you can treat positive x as east, positive y as north, and positive z as
up. The default orientation faces the listener north.</p>
<h2 id="putting-it-together"><a class="header" href="#putting-it-together">Putting it Together</a></h2>
<p>To play a source in 3D space, do the following:</p>
<ul>
<li>Create a context.</li>
<li>Create a source.</li>
<li>Create a buffer.</li>
<li>Create a generator.</li>
<li><code>generator.buffer = buffer</code></li>
<li><code>source.add_generator(generator)</code></li>
<li>Then manipulate position, etc. on the source.</li>
</ul>
<p>Note that while this list is lengthy, each step is exactly one line of code, and
it is possible to write a function which makes creating sources very easy:</p>
<pre><code>def make_source(context, file_path):
    buffer = synthizer.Buffer.from_file(context, file_path)
    generator = synthizer.BufferGenerator(context)
    generator.buffer = buffer
    source = synthizer.Sourec3D(context)
    source.add_generator(generator)
    return (buffer, generator, soruce)

(buffer, generator, source) = make_source(context, &quot;the_file.wav&quot;)
</code></pre>
<h2 id="turning-hrtf-on"><a class="header" href="#turning-hrtf-on">Turning HRTF On</a></h2>
<p>As explained in the section on <a href="../concepts/3d_audio.html">3D Audio</a>, HRTF has to
be off by default because we can't detect if the user is using headphones.  To
enable HRTF:</p>
<pre><code>context.default_panner_strategy = synthizer.PannerStrategy.HRTF
</code></pre>
<p>The <a href="../concepts/3d_audio.html">page on 3D audio</a> also explains a lot of other
useful stuff about 3D audio, and is worth reading even though it isn't
specifically for Python.</p>
<h2 id="a-worked-example"><a class="header" href="#a-worked-example">A Worked Example</a></h2>
<p>The following is a 3D media player, the audio library equivalent of hello world.
It supports the following commands:</p>
<ul>
<li><code>pause</code>, <code>play</code>: pause/play the source</li>
<li><code>seek &lt;seconds&gt;</code>: self-explanatory.</li>
<li><code>pos &lt;x&gt; &lt;y&gt; &lt;z&gt;</code>: move the source. X is right, y is forward, z is up.</li>
<li><code>loop</code>: Toggle looping of the generator.</li>
<li><code>gain &lt;value&gt;</code>: Control the gain of the generator, in DB.</li>
<li><code>quit</code>: self-explanatory.</li>
</ul>
<p>Note that the default distance model parameters cause the source to become
completely silent at around 50 units out. Movements close to the head won't
change the volume much.</p>
<p>This example also doesn't demonstrate destruction, as that's handled by library
deinitialization and process shutdown. A proper program needs <code>source.dec_ref()</code>
etc for dynamic sources, as explained above.</p>
<p>The code:</p>
<pre><code class="language-python">&quot;&quot;&quot;A simple media player, demonstrating the Synthizer basics.&quot;&quot;&quot;

import sys

import synthizer

if len(sys.argv) != 2:
    print(f&quot;Usage: {sys.argv[0]} &lt;file&gt;&quot;)
    sys.exit(1)

with synthizer.initialized(
    log_level=synthizer.LogLevel.DEBUG, logging_backend=synthizer.LoggingBackend.STDERR
):
    # Get our context, which almost everything requires.
    # This starts the audio threads.
    ctx = synthizer.Context()
    # Enable HRTF as the default panning strategy before making a source
    ctx.default_panner_strategy = synthizer.PannerStrategy.HRTF

    # A BufferGenerator plays back a buffer:
    generator = synthizer.BufferGenerator(ctx)
    # A buffer holds audio data. We read from the specified file:
    buffer = synthizer.Buffer.from_file(sys.argv[1])
    # Tell the generator to use the buffer.
    generator.buffer = buffer
    # A Source3D is a 3D source, as you'd expect.
    source = synthizer.Source3D(ctx)
    # It'll play the BufferGenerator.
    source.add_generator(generator)
    # Keep track of looping, since property reads are expensive:
    looping = False

    # A simple command parser.
    while True:
        cmd = input(&quot;Command: &quot;)
        cmd = cmd.split()
        if len(cmd) == 0:
            continue
        if cmd[0] == &quot;pause&quot;:
            source.pause()
        elif cmd[0] == &quot;play&quot;:
            source.play()
        elif cmd[0] == &quot;pos&quot;:
            if len(cmd) &lt; 4:
                print(&quot;Syntax: pos x y z&quot;)
                continue
            try:
                x, y, z = [float(i) for i in cmd[1:]]
            except ValueError:
                print(&quot;Unable to parse coordinates&quot;)
                continue
            source.position = (x, y, z)
        elif cmd[0] == &quot;seek&quot;:
            if len(cmd) != 2:
                print(&quot;Syntax: seek &lt;seconds&gt;&quot;)
                continue
            try:
                pos = float(cmd[1])
            except ValueError:
                print(&quot;Unable to parse position&quot;)
                continue
            try:
                generator.playback_position = pos
            except synthizer.SynthizerError as e:
                print(e)
        elif cmd[0] == &quot;quit&quot;:
            break
        elif cmd[0] == &quot;loop&quot;:
            looping = not looping
            generator.looping = looping
            print(&quot;Looping&quot; if looping else &quot;Not looping&quot;)
        elif cmd[0] == &quot;gain&quot;:
            if len(cmd) != 2:
                print(&quot;Syntax: gain &lt;value&gt;&quot;)
                continue
            try:
                value = float(cmd[1])
            except ValueError:
                print(&quot;Unable to parse value.&quot;)
                continue
            # Convert to scalar gain from db.
            gain = 10 ** (value / 20)
            source.gain = gain
        else:
            print(&quot;Unrecognized command&quot;)
</code></pre>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                        
                            <a rel="prev" href="../python_tutorials/installation.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>
                        

                        
                            <a rel="next" href="../python_tutorials/linger.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>
                        

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                
                    <a rel="prev" href="../python_tutorials/installation.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>
                

                
                    <a rel="next" href="../python_tutorials/linger.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
                
            </nav>

        </div>

        

        

        

        
        <script type="text/javascript">
            window.playground_copyable = true;
        </script>
        

        

        
        <script src="../elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../searcher.js" type="text/javascript" charset="utf-8"></script>
        

        <script src="../clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="../book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
        

        

    </body>
</html>
